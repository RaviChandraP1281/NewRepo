[{"attributes":{"type":"skuid__Page__c","url":"/services/data/v36.0/sobjects/skuid__Page__c/a2f19000000DNIoAAO"},"Id":"a2f19000000DNIoAAO","Name":"SpaceRequest","skuid__Type__c":"Desktop","skuid__UniqueId__c":"_SpaceRequest","skuid__Module__c":null,"skuid__Composer_Settings__c":null,"skuid__MasterPage__c":"a2f19000000DNGdAAO","skuid__MasterPage__r":{"attributes":{"type":"skuid__Page__c","url":"/services/data/v36.0/sobjects/skuid__Page__c/a2f19000000DNGdAAO"},"Name":"StudioHome","skuid__UniqueId__c":"_StudioHome"},"skuid__IsMaster__c":false,"skuid__Layout__c":"<skuidpage unsavedchangeswarning=\"yes\" theme=\"Intuit studio\"><models><model id=\"Lab_Space_Only\" limit=\"\" query=\"false\" createrowifnonefound=\"true\" adapter=\"salesforce\" type=\"\" sobject=\"Case\" doclone=\"no\"><fields><field id=\"Case_Contact_First_Name__c\" overridemetadata=\"false\" ogdisplaytype=\"STRING\" displaytype=\"STRING\"/><field id=\"Case_Contact_Last_Name__c\" overridemetadata=\"true\" ogdisplaytype=\"STRING\" displaytype=\"TEXT\"/><field id=\"Case_Contact_Email__c\"/><field id=\"Country_of_Study__c\" overridemetadata=\"true\" ogdisplaytype=\"PICKLIST\" displaytype=\"PICKLIST\" defaultValue=\"United States\"><picklistentries><entry value=\"United States\" label=\"United States\"/></picklistentries></field><field id=\"Study_Location_of_Study__c\" overridemetadata=\"true\" ogdisplaytype=\"MULTIPICKLIST\" displaytype=\"PICKLIST\" defaultValue=\"San Diego\"><picklistentries/></field><field id=\"Study_Name__c\" overridemetadata=\"false\" ogdisplaytype=\"STRING\" displaytype=\"STRING\" length=\"\"/><field id=\"Study_Start_Date__c\"/><field id=\"Study_Types__c\" overridemetadata=\"true\" ogdisplaytype=\"PICKLIST\" displaytype=\"PICKLIST\"><picklistentries><entry value=\"Card Sorting\" label=\"Card Sorting\"/><entry value=\"Co-Design Session\" label=\"Co-Design Session\"/><entry value=\"Concept Testing\" label=\"Concept Testing\"/><entry value=\"Eye Tracking\" label=\"Eye Tracking\"/><entry value=\"Mobile Testing\" label=\"Mobile Testing\"/><entry value=\"Rapid Prototyping\" label=\"Rapid Prototyping\"/><entry value=\"UsabilityTesting\" label=\"Usability Testing\"/><entry value=\"User Interviews\" label=\"User Interviews\"/></picklistentries></field><field id=\"Study_Customer_Segment__c\"/><field id=\"Study_Products__c\"/><field id=\"studyLabs\" uionly=\"true\" displaytype=\"PICKLIST\" label=\"Labs suitable for this type of study\"/><field id=\"Request_Type__c\" overridemetadata=\"false\" ogdisplaytype=\"PICKLIST\" displaytype=\"PICKLIST\" readonly=\"false\"><picklistentries><entry value=\"New Entry\" label=\"New Entry\"/></picklistentries></field><field id=\"Study_Phone__c\"/><field id=\"Strategic_Priority_Aligned__c\"/><field id=\"Study_End_Date__c\"/><field id=\"Study_Status__c\"/><field id=\"Studio_Recruiter__c\"/><field id=\"Studio_Recruiter__r.Name\"/></fields><conditions/><actions><action><actions><action type=\"requeryModel\" model=\"StudioLab\" behavior=\"standard\"><models><model>StudioLab</model></models></action></actions><events><event>models.saved</event><event>models.loaded</event><event>models.cancelled</event><event>row.created</event><event>row.updated</event><event>row.deleted</event><event>row.undeleted</event></events><fields><field>Study_Location_of_Study__c</field><field>Study_Types__c</field></fields></action><action><actions><action type=\"requeryModel\" model=\"CalenderEvent\" behavior=\"standard\"/></actions><events><event>models.saved</event><event>models.loaded</event><event>models.cancelled</event><event>row.created</event><event>row.updated</event><event>row.deleted</event><event>row.undeleted</event></events><fields><field>studyLabs</field></fields></action></actions></model><model id=\"StudioLab\" limit=\"\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"Studio_Lab__c\" doclone=\"no\" orderby=\"Name\" datasource=\"salesforce\"><fields><field id=\"Id\"/><field id=\"Name\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" field=\"Type_of_Study__c\" operator=\"includes\" userinfotype=\"userid\" model=\"Lab_Space_Only\" enclosevalueinquotes=\"true\" mergefield=\"Study_Types__c\" novaluebehavior=\"deactivate\" state=\"\" inactive=\"false\"/><condition type=\"modelmerge\" value=\"\" field=\"Location__c\" operator=\"in\" mergefield=\"Study_Location_of_Study__c\" novaluebehavior=\"deactivate\" state=\"\" inactive=\"false\" userinfotype=\"userid\" model=\"Lab_Space_Only\" enclosevalueinquotes=\"true\"/><condition type=\"fieldvalue\" value=\"SDG Lab 3\" enclosevalueinquotes=\"true\" field=\"Name\" operator=\"!=\"/></conditions><actions/></model><model id=\"CalenderEvent\" limit=\"\" query=\"true\" createrowifnonefound=\"false\" type=\"\" sobject=\"Studio_Calender__c\" doclone=\"\" processonclient=\"false\" datasource=\"salesforce\"><fields><field id=\"Name\" overridemetadata=\"false\" ogdisplaytype=\"STRING\" displaytype=\"STRING\"/><field id=\"Type__c\"/><field id=\"End_Time__c\"/><field id=\"Request_Type__c\"/><field id=\"Start_Time__c\"/><field id=\"Status__c\"/><field id=\"StudioLab__r.Name\"/><field id=\"DisplayName\" uionly=\"true\" displaytype=\"FORMULA\" label=\"Name of Study\" readonly=\"true\" returntype=\"TEXT\"><formula>{{Name}}</formula></field><field id=\"StudioLab__c\"/><field id=\"Study_Lab__c\"/><field id=\"Study_Lab__r.Name\"/><field id=\"Study_Lab__r.Study__r.Recruiter_First_Name__c\"/><field id=\"Study_Lab__r.Study__r.Recruiter_Last_Name__c\"/><field id=\"Study_Lab__r.Study__c\"/><field id=\"Study_Lab__r.Study__r.Name\"/><field id=\"Study_Lab__r.Study__r.Recruiter__c\"/><field id=\"Study_Lab__r.Study__r.Recruiter__r.Name\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" field=\"StudioLab__r.Id\" operator=\"=\" model=\"Lab_Space_Only\" enclosevalueinquotes=\"true\" mergefield=\"studyLabs\" novaluebehavior=\"noquery\" state=\"\"/></conditions><actions/></model><model id=\"NewStudy\" limit=\"\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"Study__c\" doclone=\"no\" datasource=\"salesforce\"><fields><field id=\"First_Name__c\"/><field id=\"Last_Name__c\"/><field id=\"Email__c\"/><field id=\"Country_of_Study__c\"/><field id=\"Location_Of_Study__c\"/><field id=\"Name\"/><field id=\"Start_Date_of_Study__c\"/><field id=\"End_Date_of_Study__c\"/><field id=\"Study_Type__c\"/><field id=\"Customer_Segment__c\"/><field id=\"Product__c\"/><field id=\"Phone__c\"/><field id=\"Strategic_Priority_Aligned__c\"/><field id=\"Request_Type__c\"/><field id=\"Recruiter__c\"/><field id=\"Recruiter__r.Name\"/></fields><conditions/><actions/></model><model id=\"NewStudyLab\" limit=\"\" query=\"false\" createrowifnonefound=\"false\" adapter=\"salesforce\" type=\"\" sobject=\"Study_Lab__c\" doclone=\"no\"><fields><field id=\"Study__c\"/><field id=\"Study__r.Name\"/><field id=\"Name\"/><field id=\"Studio_Lab__c\"/><field id=\"Studio_Lab__r.Name\"/></fields><conditions/><actions/></model><model id=\"SpaceRequestDefaultRecruiter\" limit=\"1\" query=\"true\" createrowifnonefound=\"false\" adapter=\"salesforce\" type=\"\" sobject=\"Space_Request_Recruiter__c\"><fields><field id=\"Name\"/><field id=\"Recruiter_Id__c\"/></fields><conditions><condition type=\"fieldvalue\" value=\"Default\" enclosevalueinquotes=\"true\" field=\"Name\" operator=\"=\" state=\"\"/></conditions><actions/></model></models><pageregioncontents><pageregioncontent regionid=\"sk-Ztodg-231\" uniqueid=\"sk-1Ltb5G-95\"><components><template multiple=\"false\" uniqueid=\"sk-3b6EcN-216\" allowhtml=\"true\"><contents>&lt;a href=\"/apex/skuid__ui?page=StudioLandingPage\"&gt;Home&lt;/a&gt; &gt; Book Studio Space</contents></template><grid uniqueid=\"sk-2tnOw7-347\"><divisions><division behavior=\"flex\" minwidth=\"10%\" ratio=\"1\" verticalalign=\"top\"><components/></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"70%\" ratio=\"1\"><components><template multiple=\"false\" uniqueid=\"sk-1p-APi-559\" model=\"CaseContactInfo\" allowhtml=\"true\"><contents>&lt;spam style=\"color:red\"&gt;&lt;b&gt;Note: All fields are required.&lt;/b&gt;&lt;/spam&gt; </contents></template><basicfieldeditor showheader=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" model=\"Lab_Space_Only\" buttonposition=\"\" uniqueid=\"sk-1L_eF_-185\" mode=\"edit\" layout=\"\"><columns><column width=\"100%\" cssclass=\"fieldCol\"><sections><section title=\"\" collapsible=\"no\" showheader=\"false\"><fields><field id=\"Case_Contact_First_Name__c\" showhelp=\"false\" valuehalign=\"\" type=\"\" required=\"true\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/><label>First Name</label></field><field id=\"Case_Contact_Last_Name__c\" showhelp=\"false\" valuehalign=\"\" type=\"\" required=\"true\"><label>Last Name</label></field><field id=\"Case_Contact_Email__c\" showhelp=\"false\" valuehalign=\"\" type=\"\" required=\"true\"><label>Email</label></field><field id=\"Study_Phone__c\" valuehalign=\"\" type=\"\" required=\"true\"/><field id=\"Strategic_Priority_Aligned__c\" valuehalign=\"\" type=\"\" required=\"true\"><label>What strategic priority(s) does this align to?</label></field><field id=\"Study_Customer_Segment__c\" valuehalign=\"\" type=\"\" required=\"true\"><label>What customer segment(s) is this study for?</label></field><field id=\"Study_Products__c\" valuehalign=\"\" type=\"\" required=\"true\"><label>What product is this study focused on?</label></field><field id=\"Study_Name__c\" valuehalign=\"\" type=\"\" required=\"true\" maxdisplaycharacters=\"\" cssclass=\"studyName\"><label>Name of Study</label><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"/></field><field id=\"Study_Location_of_Study__c\" valuehalign=\"\" type=\"\" cssclass=\"locationOfStudy typeOnStudy\" required=\"true\" addnoneoption=\"true\"><label>Location of Study</label><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"/></field><field id=\"Study_Types__c\" valuehalign=\"\" type=\"\" cssclass=\"typeOnStudy\" required=\"true\" addnoneoption=\"true\"><label>Type of study</label><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"/></field><field id=\"studyLabs\" valuehalign=\"\" type=\"\" cssclass=\"suitableLabs\" required=\"true\" addnoneoption=\"true\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions/></field></fields></section></sections><renderconditions logictype=\"and\"/></column></columns><renderconditions logictype=\"and\"/></basicfieldeditor><grid uniqueid=\"calViewer\"><divisions><division behavior=\"specified\" verticalalign=\"top\" width=\"1%\"><components/></division><division behavior=\"specified\" verticalalign=\"top\" width=\"29%\"><components><template multiple=\"false\" uniqueid=\"calenderLabs\" allowhtml=\"true\"><contents>&lt;div class=\"nx-basicfieldeditor-item-label\"&gt;&lt;div class=\"nx-template\"&gt;Labs Calendar&lt;/div&gt;&lt;/div&gt;</contents><renderconditions logictype=\"and\"/></template></components></division><division behavior=\"specified\" verticalalign=\"top\" width=\"100%\"><components><skoocal rememberdate=\"true\" rememberview=\"true\" uniqueid=\"sk-1QwJqU-800\" cssclass=\"calenderView\"><sources><eventsource name=\"StudioLabEvents\" createable=\"true\" deleteable=\"false\" updateable=\"false\" eventclickhandler=\"custompopup\" showdefaultbuttons=\"true\" model=\"CalenderEvent\" namefield=\"DisplayName\" startfield=\"Start_Time__c\" endfield=\"End_Time__c\"><eventtemplate>Name: {{{Name}}}\nStart Time: {{Start_Time__c}}\nEnd Time: {{End_Time__c}}</eventtemplate><onclickpopup title=\"Edit Event\" width=\"55%\" showdefaultbuttons=\"false\"><components><wrapper uniqueid=\"sk-2IvQly-850\" cssclass=\"popupResGrid\"><components><grid uniqueid=\"sk-1uA3hS-325\" cssclass=\"\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\" verticalalign=\"top\"><components><template multiple=\"false\" uniqueid=\"sk-2afDV4-1049\" allowhtml=\"true\"><contents>&lt;div&gt;&lt;/div&gt;</contents><conditions><condition type=\"contextrow\" field=\"Id\" mergefield=\"Id\" autocreated=\"true\"/></conditions></template><basicfieldeditor showheader=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" model=\"CalenderEvent\" buttonposition=\"\" uniqueid=\"sk-1uA5I5-330\" mode=\"edit\" layout=\"\"><columns><column width=\"100%\" cssclass=\"popupCol\"><sections><section title=\"Section A\" collapsible=\"no\" showheader=\"false\"><fields><field id=\"DisplayName\" valuehalign=\"\" type=\"\" cssclass=\"nameOfStudy\"><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"><rendercondition fieldmodel=\"CalenderEvent\" sourcetype=\"rowproperty\" sourceproperty=\"isSaved\" enclosevalueinquotes=\"false\"/></renderconditions><enableconditions/></field><field id=\"Start_Time__c\" valuehalign=\"\" type=\"\" minuteincrement=\"5\"/><field id=\"End_Time__c\" valuehalign=\"\" type=\"\" minuteincrement=\"5\"/></fields></section></sections></column></columns><conditions><condition type=\"contextrow\" field=\"Id\" mergefield=\"Id\" autocreated=\"true\"/></conditions><renderconditions logictype=\"and\"/></basicfieldeditor><pagetitle model=\"CalenderEvent\" uniqueid=\"sk-1uAbcb-359\"><actions><action type=\"multi\" label=\"Cancel\" icon=\"\" cssclass=\"cancelColor\"><actions><action type=\"closeTopmostPopup\"/><action type=\"custom\" snippet=\"CalenderEventCancle\"/></actions><hotkeys/><renderconditions logictype=\"and\"/><enableconditions/></action><action type=\"multi\" label=\"Next\" icon=\"\" secondary=\"false\" cssclass=\"nextColor\"><actions><action type=\"custom\" snippet=\"ManageCalenderRecords\"/><action type=\"closeTopmostPopup\"/><action type=\"custom\" snippet=\"CreateNewCalEvents\"/></actions><renderconditions logictype=\"and\"/><enableconditions logictype=\"and\"/><hotkeys/></action></actions><conditions><condition type=\"contextrow\" field=\"Id\" mergefield=\"Id\" autocreated=\"true\"/></conditions><renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"true\" fieldmodel=\"CalenderEvent\" sourcetype=\"rowproperty\" nosourcerowbehavior=\"deactivate\" sourceuserinfotype=\"profilename\" sourceproperty=\"isNew\"/></renderconditions></pagetitle></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles></grid></components><styles><styleitem type=\"background\"/><styleitem type=\"border\"/><styleitem type=\"size\"/></styles></wrapper></components></onclickpopup></eventsource></sources><views><eventview type=\"month\" hideweekends=\"true\"/><eventview type=\"week\" hideweekends=\"true\" starthour=\"8\" endhour=\"18\" divisionsperhour=\"4\"/></views><renderconditions logictype=\"and\"/></skoocal></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles></grid><pagetitle uniqueid=\"saveCancleButton\" model=\"Lab_Space_Only\"><actions><action type=\"custom\" window=\"self\" rollbackonanyerror=\"true\" uniqueid=\"saveButton\" weblinkname=\"geopointe__Map\" label=\"Submit\" weblinkobject=\"Case\" snippet=\"submitValues\" icon=\"\" cssclass=\"nextColor\"><hotkeys/><renderconditions logictype=\"and\"/><enableconditions/></action></actions></pagetitle></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"10%\" ratio=\"1\"><components/></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles></grid></components></pageregioncontent></pageregioncontents><components/><resources><labels/><css><cssitem location=\"inline\" name=\"RemoveFieldEcitCss\" cachelocation=\"false\">.nx-basicfieldeditor-item{\n    border-bottom: transparent;\n    background-color: transparent;\n}\nselect{\n    font-family: 'Open Sans',sans-serif;\n    width: 100%;\n    border: 1px solid #ddd;\n    font-size: 1em;\n    padding: 4px;\n    border-radius: 4px;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n.nx-field .nx-richtext-input, .nx-field input, .nx-field textarea{\n    background: transparent;\n    border-radius: 4px;\n    border: 1px solid #ddd;\n}\n.ui-button.nx-button-secondary, .ui-widget-content .ui-button.nx-button-secondary.ui-state-default{\n    background: #f0640f;\n    border: 1px solid #f0640f;\n    color: white;\n}\n.nextColor{\n    background: #f0640f !important;\n    border: 1px solid #f0640f !important;\n    color: white;\n}\n.cancelColor{\n    background: lightgray !important;\n    border: 1px solid lightgray !important;\n    color: white !important;\n}\n.nx-editor input,.nx-editor .required input, .nx-editor .required textarea,.nx-editor select,.nx-editor .required select,.nx-editor .required [type=button].ui-multiselect,.nx-editor .required select,.nx-editor [type=button].ui-multiselect{\n   border: 1px solid #c7c7cc;  \n   border-radius: 4px;\n   background-color: #ffffff;\n}\n.nx-messages{\n    display: none !important;\n}\n.nx-error-inline{\n    display: block;\n}\n.popupCol .nx-basicfieldeditor-item-label {\n\twidth: 25% !important;\n}\n.nx-cal-dowpicker{\n    visibility: hidden;\n}\n.nx-basicfieldeditor-section{\n    border:none;\n}\n.popupResGrid .popupCol .nx-basicfieldeditor-item-label {\n    width: 17% !important;\n}</cssitem></css><javascript><jsitem location=\"inline\" name=\"setSuitableLabs\" cachelocation=\"false\" url=\"\">var $ = skuid.$;\nvar CalenderRecBackup = [];\nvar defaultRecruiterId;\n$(document.body).one('pageload',function(){ \n    setRequestTypeValue();\n    setChangeActionForType();\n    $('#calViewer').hide();\n    setsuitableLabsChange();\n    setLocationsOfStudy();\n    setSSOSentInfoToRecord();\n    loadDefaultRecruiterId();\n    $(\".DoubleBookErrorMessage\").hide();\n});\n\nfunction loadDefaultRecruiterId(){\n    defaultRecruiterId = skuid.model.getModel('SpaceRequestDefaultRecruiter').getFirstRow().Recruiter_Id__c;\n}\n\nfunction setSSOSentInfoToRecord(){\n    var labSpaceOnly = skuid.model.getModel('Lab_Space_Only');\n    data = JSON.parse($.cookie('userInformation'));\n    $.each(labSpaceOnly.data,function(i,row){\n        labSpaceOnly.updateRow(row,{\n            Case_Contact_First_Name__c:data['givenname'],\n            Case_Contact_Last_Name__c:data['familyname'],\n            Case_Contact_Email__c:data['mail']\n        });\n    });\n}\n\nfunction setLocationsOfStudy(){\n    var htmlOptions = '&lt;option value=\"\"&gt;--None--&lt;/option&gt;';\n    htmlOptions += '&lt;option value=\"San Diego\"&gt;San Diego&lt;/option&gt;';\n    htmlOptions += '&lt;option value=\"Mountain View\"&gt;Mountain View&lt;/option&gt;';\n   // htmlOptions += '&lt;option value=\"Remote\"&gt;Remote&lt;/option&gt;';\n    $('.locationOfStudy select').html(htmlOptions);\n}\n\nfunction setRequestTypeValue(){\n    var labSpaceOnly = skuid.model.getModel('Lab_Space_Only');\n    $.each(labSpaceOnly.data,function(i,row){\n        labSpaceOnly.updateRow(row,{\n            Request_Type__c: 'Lab Space',\n            Study_Status__c: 'Request submitted',\n            Studio_Recruiter__c:defaultRecruiterId\n        });\n    });\n}\n\nfunction setsuitableLabsChange(){\n    $('.suitableLabs select').change(function(){\n        if($('.suitableLabs select').val() !== \"\"){\n            $('#calViewer').show();\n        }else{\n            $('#calViewer').hide();\n        }\n    });\n}\n\nfunction setChangeActionForType(){\n    /*Action of model updations*/\n    skuid.events.subscribe('models.loaded',function(updateResult){\n       if(typeof updateResult.models.StudioLab != \"undefined\"){\n            updateSuitableLabs();\n       }\n       if(typeof updateResult.models.CalenderEvent != \"undefined\"){\n            CalenderRecBackup = skuid.model.getModel('CalenderEvent').data\n            //$('.nx-cal-dowpicker').remove();\n       }\n    });\n    /*Action of model rows data updations*/\n    skuid.events.subscribe('row.updated',function(updateResult){\n        if(updateResult.modelId == 'Lab_Space_Only'){\n            if(typeof updateResult.updates.Study_Name__c != \"undefined\"){\n                $.each(CalenderRecBackup,function(index,value){\n                // if(CalenderRecBackup.hasOwnProperty('Id15')){\n                \tif(value.Id !== undefined &amp;&amp; value.Id.length &lt; 18){\n                \t\tvalue.Name = updateResult.updates.Study_Name__c;\n                \t}\n                 // }\n                });\n                skuid.model.getModel('CalenderEvent').adoptRows(CalenderRecBackup);\n            }\n            if(typeof updateResult.updates.studyLabs != \"undefined\"){\n               CalenderRecBackup = skuid.model.getModel('CalenderEvent').data\n            }\n        }\n    });\n}\n\nfunction updateSuitableLabs(){\n    $('#calViewer').hide();\n    htmlOptions = '&lt;option value=\"\"&gt;--None--&lt;/option&gt;';\n    $.each(skuid.model.getModel('StudioLab').data,function(index,value){\n        htmlOptions += '&lt;option value=\"'+value.Id+'\"&gt;'+value.Name+'&lt;/option&gt;';\n        \n    });\n    $('.suitableLabs select').html(htmlOptions);\n}\n\nfunction setValuesOfNewStudyLab(newStudyLab){\n\tvar newStudy = skuid.model.getModel('NewStudy').getFirstRow();\n\tvar labSpaceValues = skuid.model.getModel('Lab_Space_Only').getFirstRow();\n\tvar newStudyLabRecords = newStudyLab.createRow({\n\t\tadditionalConditions: [\n\t\t\t{\tfield: 'Studio_Lab__c', value: labSpaceValues.studyLabs\t},\n\t\t\t{\tfield: 'Study__c', value: newStudy.Id\t},\n\t\t\t{\tfield: 'Name', value: newStudy.Name+'-'+$('.suitableLabs select option:selected').text()\t}\n\t\t], doAppend: true\n\t});\n}\n\nfunction setValuesOfNewStudy(newStudy,labSpaceValues){\n\tvar newStudyRecords = newStudy.createRow({\n\t\tadditionalConditions: [\n\t\t\t{\tfield: 'First_Name__c', value: labSpaceValues.Case_Contact_First_Name__c\t},\n\t\t\t{\tfield: 'Last_Name__c', value: labSpaceValues.Case_Contact_Last_Name__c\t},\n\t\t\t{\tfield: 'Email__c', value: labSpaceValues.Case_Contact_Email__c\t},\n\t\t\t{\tfield: 'Country_of_Study__c', value: labSpaceValues.Country_of_Study__c\t},\n\t\t\t{\tfield: 'Location_Of_Study__c', value: labSpaceValues.Study_Location_of_Study__c\t},\n\t\t\t{\tfield: 'Name', value: labSpaceValues.Study_Name__c\t},\n\t\t\t{\tfield: 'Start_Date_of_Study__c', value: labSpaceValues.Study_Start_Date__c\t},\n\t\t\t{\tfield: 'End_Date_of_Study__c', value: labSpaceValues.Study_End_Date__c\t},\n\t\t\t{\tfield: 'Study_Type__c', value: labSpaceValues.Study_Types__c\t},\n\t\t\t{\tfield: 'Customer_Segment__c', value: labSpaceValues.Study_Customer_Segment__c\t},\n\t\t\t{\tfield: 'Product__c', value: labSpaceValues.Study_Products__c\t},\n\t\t\t{\tfield: 'Related_Case__c', value:labSpaceValues.Id\t},\n\t\t\t{\tfield: 'Phone__c', value:labSpaceValues.Study_Phone__c\t},\n\t\t\t{\tfield: 'Strategic_Priority_Aligned__c', value:labSpaceValues.Strategic_Priority_Aligned__c\t},\n\t\t\t{\tfield: 'Request_Type__c', value:'Lab Space Only'\t},\n\t\t\t{\tfield: 'Recruiter__c', value:defaultRecruiterId\t}\n\t\t], doAppend: true\n\t});\n}\n\nfunction setLabSpaceCaseValues(labSpace){\n    var sartAndEndDate = {};\n    $.each(CalenderRecBackup,function(index,value){\n       // if(CalenderRecBackup.hasOwnProperty('Id15')){\n            if(value.Id !== undefined &amp;&amp; value.Id.length &lt; 18){\n                var startDate = new Date(value.Start_Time__c);\n                var endDate = new Date(value.End_Time__c);\n                if(typeof sartAndEndDate.startDate == \"undefined\"){\n                    sartAndEndDate.startDate = startDate;\n                }else if(startDate &lt; sartAndEndDate.startDate ){\n                        sartAndEndDate.startDate = startDate;\n                }\n                if(typeof sartAndEndDate.endDate == \"undefined\"){\n                    sartAndEndDate.endDate = endDate;\n                }else if(endDate &gt; sartAndEndDate.endDate){\n                        sartAndEndDate.endDate = endDate;\n                }\n        //    }\n        }\n    });\n   // var newStudyRecords = labSpace.getFirstRow();\n    \n   // var newstdate = new Date(convertDateToString(sartAndEndDate.endDate));\n    \n   // newStudyRecords.Study_Start_Date__c = skuid.time.getSFDate(newstdate);\n   // newStudyRecords.Study_End_Date__c =   skuid.time.getSFDate(newstdate); //convertDateToString(sartAndEndDate.endDate);\n   \n   var newStudyRecords = skuid.model.getModel('Lab_Space_Only');\n    var cookiedata = JSON.parse($.cookie('userInformation'));\n    $.each(newStudyRecords.data,function(i,row){\n        newStudyRecords.updateRow(row,{\n            Study_Start_Date__c: convertDateToString(sartAndEndDate.startDate),\n            Study_End_Date__c:convertDateToString(sartAndEndDate.endDate),\n            Study_First_Name__c:cookiedata['givenname'],\n            Study_Last_Name__c:cookiedata['familyname'],\n            Study_Email__c :cookiedata['mail']\n        });\n    });\n}\n\nfunction setCalenderEventValues(calEvents,finalizedData){\n    var labSpaceValue = skuid.model.getModel('Lab_Space_Only').getFirstRow();\n    var studyLab = skuid.model.getModel('NewStudyLab').getFirstRow();\n    $.each(finalizedData,function(index,value){\n       if(value.Id !== undefined &amp;&amp; value.Id.length &lt; 18){\n            calEvents.createRow({\n        \t\tadditionalConditions: [\n        \t\t\t{\tfield: 'Name', value: labSpaceValue.Study_Name__c\t},\n        \t\t\t{\tfield: 'Type__c', value: 'Participant Level'\t},\n        \t\t\t{\tfield: 'Request_Type__c', value: 'Space Request'    },\n        \t\t\t{\tfield: 'StudioLab__c', value: labSpaceValue.studyLabs\t},\n        \t\t\t{\tfield: 'Study_Lab__c', value: studyLab.Id\t},\n        \t\t\t{\tfield: 'Start_Time__c', value: value.Start_Time__c\t},\n        \t\t\t{\tfield: 'End_Time__c', value: value.End_Time__c\t}\n        \t\t], doAppend: true\n        \t});\n        }\n    });\n}\n\nfunction convertDateToString(dateValue){\n    var stringData;\n    if(typeof dateValue != \"undefined\"){\n        stringData = dateValue.getUTCFullYear()+'-'\n    \t\t\t\t+pad(dateValue.getUTCMonth()+1,2)+'-'\n    \t\t\t\t+pad(dateValue.getUTCDate(),2);\n    }\n\treturn stringData;\n}\n\nfunction pad(num, max) {\n    var str = num.toString();\n    return str.length &lt; max ? pad(\"0\" + str, max) : str;\n}\n\nfunction isAllValuesExists(){\n    var endData = true;\n    $('.fieldCol input').each(function(){\n        if($(this).val().length === 0){\n            endData = false;\n        }\n    });\n    $('.fieldCol select').each(function(){\n        if($(this).val() !== null &amp;&amp; $(this).val().length === 0){\n            endData = false;\n        }else if($(this).val() === null){\n            endData = false;\n        }\n    });\n    return endData;\n}\n\n/*\n* SRS-230\n* Description: As a recruiter, I should not be able to double book space within Salesforce. An error should appear to tell me that space has been booked for X study by X recruiter.\n*   Text: This space is already booked during this time. Please select a different time or a different lab. Thank you.\n* start\n*/\t\n\nfunction isDateOverLapped(rowtocheckstartD,rowtocheckendD,recId){\n    var isOverLapping = false;\n    var calEvent = skuid.model.getModel('CalenderEvent');\n  var msgcontent = 'This space is already booked during this time. Please select a different time or a different lab. Thank you.';\n               /*  var msgcontent = 'space has been booked for '+value.Name;\n                if(value.Study_Lab__c !== undefined &amp;&amp; value.Study_Lab__r.Study__c !== undefined &amp;&amp; value.Study_Lab__r.Study__r.Recruiter__r.Name !== undefined)\n                    msgcontent += ' by '+value.Study_Lab__r.Study__r.Recruiter__r.Name +' recruiter';*/\n  var errorMsg = \"&lt;div class=\\\"customError2\\\" style=\\\"color:red;\\\"&gt;\"+msgcontent+\"&lt;/div&gt;\";\n \n    $.each(calEvent.data,function(index,value){\n     var existingRecstartD = new Date(value.Start_Time__c), existingRecEndD = new Date(value.End_Time__c);\n        if(value.Id !== undefined &amp;&amp; value.Id != recId &amp;&amp; value.Id.length &gt;= 18){\n           if((existingRecstartD.getTime() === rowtocheckstartD.getTime() &amp;&amp; existingRecEndD.getTime() === rowtocheckendD.getTime())||\n                (existingRecstartD &gt; rowtocheckstartD &amp;&amp; existingRecstartD &lt; rowtocheckendD)||\n                (existingRecstartD &lt; rowtocheckstartD &amp;&amp; existingRecEndD &gt; rowtocheckstartD)||\n                (existingRecEndD &gt; rowtocheckstartD &amp;&amp; existingRecEndD &lt; rowtocheckendD)||\n                (existingRecstartD &lt; rowtocheckendD &amp;&amp; existingRecEndD &gt; rowtocheckendD)||\n                (existingRecstartD &lt; rowtocheckstartD &amp;&amp; existingRecstartD &lt; rowtocheckendD &amp;&amp; existingRecEndD &gt; rowtocheckstartD &amp;&amp; existingRecEndD &lt; rowtocheckendD )||\n                (existingRecstartD &lt; rowtocheckstartD &amp;&amp; existingRecEndD &lt; rowtocheckstartD &amp;&amp; existingRecEndD &gt; rowtocheckendD &amp;&amp; existingRecstartD &lt; rowtocheckendD )){\n                if(!isOverLapping){\n                     $('.popupResGrid').prepend(errorMsg);\n                }\n                isOverLapping = true;\n            return isOverLapping;\n            }\n        }\n        else if(value.Id !== undefined &amp;&amp; value.Id != recId &amp;&amp; value.Id.length &lt; 18){\n           if((existingRecstartD.getTime() == rowtocheckstartD.getTime() &amp;&amp; existingRecEndD.getTime() == rowtocheckendD.getTime())||\n                (existingRecstartD &gt; rowtocheckstartD &amp;&amp; existingRecstartD &lt; rowtocheckendD)||\n                (existingRecstartD &lt; rowtocheckstartD &amp;&amp; existingRecEndD &gt; rowtocheckstartD)||\n                (existingRecEndD &gt; rowtocheckstartD &amp;&amp; existingRecEndD &lt; rowtocheckendD)||\n                (existingRecstartD &lt; rowtocheckendD &amp;&amp; existingRecEndD &gt; rowtocheckendD)||\n                (existingRecstartD &lt; rowtocheckstartD &amp;&amp; existingRecstartD &lt; rowtocheckendD &amp;&amp; existingRecEndD &gt; rowtocheckstartD &amp;&amp; existingRecEndD &lt; rowtocheckendD )||\n                (existingRecstartD &lt; rowtocheckstartD &amp;&amp; existingRecEndD &lt; rowtocheckstartD &amp;&amp; existingRecEndD &gt; rowtocheckendD &amp;&amp; existingRecstartD &lt; rowtocheckendD )){\n                if(!isOverLapping){\n                     $('.popupResGrid').prepend(errorMsg);\n                }\n                isOverLapping = true;\n                return isOverLapping;\n            }\n        }\n        \n    });\n    return isOverLapping;\n}\n\n//END</jsitem><jsitem location=\"inlinesnippet\" name=\"submitValues\" cachelocation=\"false\">var labSpace = skuid.model.getModel('Lab_Space_Only');\nvar finalizedData = CalenderRecBackup;\nvar hasNewCalenderRecord = false;\n$.each(finalizedData,function(index,value){\n   if(value.Id !== undefined  &amp;&amp; value.Id.length &lt; 18){\n        hasNewCalenderRecord = true;\n    }\n});\n\n$('.cal-cust-error-msg').remove();\n$('.studyname-cust-error-msg').remove();\nif(isAllValuesExists()){\n    if(!hasNewCalenderRecord){\n        $('.calenderView').append('&lt;div class=\"nx-error-inline cal-cust-error-msg\"&gt;Please book a calendar to allocate a space.&lt;/div&gt;')\n        return -1;\n    }\n    if(labSpace.data[0].Study_Name__c.length &gt; 80){\n        $('.studyName .nx-modified').prepend('&lt;div class=\"nx-error-inline studyname-cust-error-msg\"&gt;Name of study length should be less than or equal to 80.&lt;/div&gt;')\n        return -1;\n    }\n}\nskuid.$.blockUI({ message: 'Submitting request.'});\nsetLabSpaceCaseValues(labSpace);\nlabSpace.save({callback: function(result){\n\tif (result.totalsuccess){\n\t\tvar newStudy = skuid.model.getModel('NewStudy');\n\t\tsetValuesOfNewStudy(newStudy,labSpace.getFirstRow());\n\t\tnewStudy.save({callback: function(result){\n\t\t\tif (result.totalsuccess){\n\t\t\t\tvar newStudyLab = skuid.model.getModel('NewStudyLab');\n\t\t\t\tsetValuesOfNewStudyLab(newStudyLab);\n\t\t\t\tnewStudyLab.save({callback: function(result){\n\t\t\t\t\tif (result.totalsuccess){\n\t\t\t\t\t\tvar calEvents = skuid.model.getModel('CalenderEvent');\n\t\t\t\t\t\tsetCalenderEventValues(calEvents,finalizedData);\n\t\t\t\t\t\tcalEvents.save({callback: function(result){\n\t\t\t\t\t\t\tif (result.totalsuccess){\n        \t\t\t\t\t   skuid.$.blockUI({ message: 'Request successfully submitted.'});\n        \t\t\t\t\t   window.open(publicSite+\"/apex/skuid__ui?page=SpaceRequestThankYou\",\"_self\");\n        \t\t\t\t\t}else{\n        \t\t\t\t\t\tconsole.log(result.insertResults);\n        \t\t\t\t\t}\n        \t\t\t\t}});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log(result.insertResults);\n\t\t\t\t\t}\n\t\t\t\t}});\n\t\t\t}else{\n\t\t\t\tconsole.log(result.insertResults);\n\t\t\t}\n\t\t}});\n\t}else{\n\t\tconsole.log(result.insertResults);\n        skuid.$.blockUI({ message: '',timeout: 1});\n\t}\n}});</jsitem><jsitem location=\"inlinesnippet\" name=\"ManageCalenderRecords\" cachelocation=\"false\">var params = arguments[0],\n$ = skuid.$;\nvar calEvent = skuid.model.getModel('CalenderEvent');\nvar isError = false;\n$('.customError').remove();\n$('.customError2').remove();\n\n/*\n* SRS-230\n* Description: As a recruiter, I should not be able to double book space within Salesforce. An error should appear to tell me that space has been booked for X study by X recruiter.\n*   Text: This space is already booked during this time. Please select a different time or a different lab. Thank you.\n* start\n*/\t\n\n$.each(calEvent.data,function(index,value){\n   if(value.Id !== undefined &amp;&amp; value.Id.length &lt; 18){\n        var startDate = new Date(value.Start_Time__c);\n        var endDate = new Date(value.End_Time__c);\n        if(startDate &gt; endDate){\n            var errorMsg = \"&lt;div class=\\\"customError\\\" style=\\\"color:red;\\\"&gt;Start date time can not be greater than End date time.&lt;/div&gt;\";\n            $('.popupResGrid').prepend(errorMsg);\n            isError = true;\n            return false;\n        }\n        else if(isDateOverLapped(startDate,endDate,value.Id)){\n            isError = true;\n            return false;\n        }\n   }\n});\n//END\n\nif(isError)\n    return false;\n    \n    \nCalenderRecBackup = calEvent.data.slice();</jsitem><jsitem location=\"inlinesnippet\" name=\"CreateNewCalEvents\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\nvar labSpaceValue = skuid.model.getModel('Lab_Space_Only').getFirstRow();\nvar NameofStudy = '{{Name of Study}}';\nif(typeof labSpaceValue.Study_Name__c != \"undefined\" &amp;&amp; labSpaceValue.Study_Name__c.length &gt; 1){\n    NameofStudy = labSpaceValue.Study_Name__c;\n}\n$.each(CalenderRecBackup,function(index,value){\n\tif(typeof value.Name == \"undefined\"){\n\t\tvalue.Name = NameofStudy;\n\t\tvalue.Type__c = 'Participant Level';\n\t\tvalue.Request_Type__c = 'Space Request';\n\t\tvalue.StudioLab__c = labSpaceValue.studyLabs;\n\t}\n});\nskuid.model.getModel('CalenderEvent').adoptRows(CalenderRecBackup);</jsitem><jsitem location=\"inlinesnippet\" name=\"CalenderEventCancle\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\nskuid.model.getModel('CalenderEvent').adoptRows(CalenderRecBackup);</jsitem><jsitem location=\"inline\" name=\"WorkaroundFOR811\" cachelocation=\"false\" url=\"\">/**\n * This is workaround for timezone issue with Skuid 8.11. This is a temporary\n * workaround and should be removed after Skuid 8.15.5 (or later) is installed.\n **/ \n\n(function(skuid){\n\t\n\tvar platform = skuid.platform,\n\t\torigGetResourceUrl = platform.getResourceUrl;\n\n\tplatform.getResourceUrl = function(params) {\n\t\tvar name;\n\t\t\n\t\tif (typeof params === 'object') {\n\t\t\tname = params.name;\n\t\t} else if (typeof params === 'string') {\n\t\t\tname = params;\n\t\t}\n\t\t\n\t\t//  If this is MomentJS, force the skuid namespace\n\t\tif (name === 'MomentJS') {\n\t\t\treturn origGetResourceUrl({\n\t\t\t\tname : name,\n\t\t\t\tnamespace : 'skuid',\n\t\t\t\tmodstamp : skuid.utils.getCacheTimestamp()\n\t\t\t});\n\t\t} else {\n\t\t\treturn origGetResourceUrl(params);\n\t\t}\n\t};\n\t   \n})(skuid);\n</jsitem></javascript></resources></skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null}]