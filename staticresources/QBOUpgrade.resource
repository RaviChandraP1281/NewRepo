[{"attributes":{"type":"skuid__Page__c","url":"/services/data/v36.0/sobjects/skuid__Page__c/a2f19000000DIwfAAG"},"Id":"a2f19000000DIwfAAG","Name":"QBOUpgrade","skuid__Type__c":"Desktop","skuid__UniqueId__c":"_QBOUpgrade","skuid__Module__c":null,"skuid__Composer_Settings__c":null,"skuid__MasterPage__c":null,"skuid__MasterPage__r":null,"skuid__IsMaster__c":false,"skuid__Layout__c":"<skuidpage unsavedchangeswarning=\"yes\" personalizationmode=\"server\" showsidebar=\"false\" showheader=\"false\" theme=\"Intuit\"><models><model id=\"AssetModel\" limit=\"1\" query=\"true\" createrowifnonefound=\"false\" type=\"\" sobject=\"Asset\" doclone=\"\" unloadwarningifunsavedchanges=\"false\" datasource=\"salesforce\"><fields><field id=\"Company_Id__c\"/><field id=\"Product2Id\"/><field id=\"Product2.Name\"/><field id=\"MasterAdmin__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Master Admin\"/><field id=\"CurrentPrice__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Current Price\"/><field id=\"Discount__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Discount\"/><field id=\"UserId__ui\" uionly=\"true\" displaytype=\"TEXT\"/><field id=\"AccountId\"/><field id=\"Account.Name\"/><field id=\"DiscountPrice__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Discounted Price\"/><field id=\"BillingPeriod__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Billing Period\"/><field id=\"Trial_End_Date__c\"/><field id=\"Signup_Date__c\"/><field id=\"EndDate__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"End Date\"/><field id=\"StatusGlobal__c\"/><field id=\"Id\"/></fields><conditions><condition type=\"param\" value=\"id\" field=\"Id\" operator=\"=\" enclosevalueinquotes=\"true\" novaluebehavior=\"\"/></conditions><actions/></model><model id=\"OfferedProduct\" limit=\"1\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"Offered_Product__c\" doclone=\"\" unloadwarningifunsavedchanges=\"false\" datasource=\"salesforce\"><fields><field id=\"DiscountDescription__c\"/><field id=\"Offer__r.ProductCode\"/></fields><conditions><condition type=\"fieldvalue\" value=\"\" enclosevalueinquotes=\"true\" field=\"Offer__r.ProductCode\" state=\"filterableoff\" inactive=\"true\" name=\"OfferedProductFilter\"/></conditions><actions/></model><model id=\"UpgradeTable\" limit=\"2\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"Offered_Product__c\" doclone=\"\" unloadwarningifunsavedchanges=\"false\" datasource=\"salesforce\"><fields><field id=\"Name__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Product\"/><field id=\"OrigPrice__ui\" uionly=\"true\" displaytype=\"DOUBLE\" label=\"Original Price\" precision=\"9\" scale=\"2\"/><field id=\"DiscPrice__ui\" uionly=\"true\" displaytype=\"DOUBLE\" label=\"Discount Price\" precision=\"9\" scale=\"2\"/><field id=\"BillingPeriod__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Billing Period\"/></fields><conditions/><actions/></model><model id=\"SelectedRow\" limit=\"1\" query=\"false\" createrowifnonefound=\"true\" type=\"\" sobject=\"Offered_Product__c\" doclone=\"\" unloadwarningifunsavedchanges=\"false\" datasource=\"salesforce\"><fields><field id=\"Name__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Product\"/><field id=\"OrigPrice__ui\" uionly=\"true\" displaytype=\"DOUBLE\" label=\"Original Price\" precision=\"9\" scale=\"2\"/><field id=\"DiscPrice__ui\" uionly=\"true\" displaytype=\"DOUBLE\" label=\"Discount Price\" precision=\"9\" scale=\"2\"/><field id=\"OfferId__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Offer Id\"/><field id=\"PricebookEntry__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Pricebook Entry\"/><field id=\"ProrateAmt__ui\" uionly=\"true\" displaytype=\"TEXT\" precision=\"9\" scale=\"2\"/><field id=\"ErrorMessage__ui\" uionly=\"true\" displaytype=\"TEXT\" label=\"Error Message\"/><field id=\"DiscPriceFlag__ui\" uionly=\"true\" displaytype=\"FORMULA\" label=\"Discount Price Flag\" readonly=\"true\" returntype=\"TEXT\"><formula>IF({{DiscPrice__ui}}==0,true,false)</formula></field></fields><conditions/><actions/></model><model id=\"NewOpportunity\" limit=\"1\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"Opportunity\" datasource=\"salesforce\"><fields><field id=\"AccountId\"/><field id=\"Account.Name\"/><field id=\"Name\"/><field id=\"StageName\"/><field id=\"CloseDate\"/><field id=\"Product_Family_of_Interest__c\"/><field id=\"LeadSource\"/><field id=\"OpportunityLineItems\" type=\"childRelationship\" limit=\"10\"/><field id=\"Pricebook2Id\"/><field id=\"Pricebook2.Name\"/><field id=\"Type\"/><field id=\"Siebel_Order_id__c\"/><field id=\"Asset__r.Id\"/><field id=\"Asset__c\"/><field id=\"Asset__r.Name\"/><field id=\"CurrencyIsoCode\"/></fields><conditions/><actions/></model><model id=\"NewOpportunityProduct\" query=\"true\" createrowifnonefound=\"false\" type=\"\" sobject=\"OpportunityLineItem\" limit=\"1\" datasource=\"salesforce\"><fields><field id=\"OpportunityId\"/><field id=\"Opportunity.Name\"/><field id=\"Product2Id\"/><field id=\"Product2.Name\"/><field id=\"PricebookEntryId\"/><field id=\"PricebookEntry.Name\"/></fields><conditions><condition type=\"fieldvalue\" value=\"00kf0000006D2ToAAK\" enclosevalueinquotes=\"true\" field=\"Id\"/></conditions><actions/><groupby method=\"simple\"/></model><model id=\"PricebookEntryLookup\" limit=\"1\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"PricebookEntry\" datasource=\"salesforce\"><fields><field id=\"Product2Id\"/><field id=\"Product2.Name\"/><field id=\"Pricebook2Id\"/><field id=\"Pricebook2.Name\"/><field id=\"CurrencyIsoCode\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" field=\"Id\" state=\"\" operator=\"=\" model=\"SelectedRow\" enclosevalueinquotes=\"true\" mergefield=\"PricebookEntry__ui\" novaluebehavior=\"deactivate\"/></conditions><actions/></model></models><components><wrapper uniqueid=\"sk-1w3rpN-621\"><components><wizard deferstepcontentsrendering=\"false\" buttonslocation=\"bottom\" uniqueid=\"UpgradeWizard\"><steps><step stepid=\"step1\" steplabel=\"\"><components><wrapper uniqueid=\"sk-2In5A5-1208\"><components><template multiple=\"false\" uniqueid=\"sk-2ImhBI-1149\" allowhtml=\"true\"><contents>&lt;span style=\"font-size: 30px\"&gt;Upgrade QBO&lt;/span&gt;</contents></template></components><styles><styleitem type=\"background\"/><styleitem type=\"border\" padding=\"bottom,left,\" borders=\"none\"><styles><styleitem property=\"padding-left\" value=\"7px\"/><styleitem property=\"padding-bottom\" value=\"7px\"/><styleitem property=\"box-sizing\" value=\"border-box\"/></styles></styleitem><styleitem type=\"size\"/></styles></wrapper><basicfieldeditor showheader=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" model=\"AssetModel\" buttonposition=\"\" uniqueid=\"sk-1w6CBo-141\" mode=\"readonly\" layout=\"\"><columns><column width=\"100%\"><sections><section title=\"Section A\" collapsible=\"no\" showheader=\"false\"><fields><field type=\"COMBO\" valuehalign=\"\" editmodebehavior=\"autopopup\"><label>Current Product:</label><template>{{Product2.Name}}</template></field><field type=\"COMBO\" valuehalign=\"\" editmodebehavior=\"autopopup\" allowhtml=\"true\"><label>Price:</label><template>{{#DiscountPrice__ui}}&lt;span style=\"padding-right: 10px\"&gt;${{DiscountPrice__ui}}/{{BillingPeriod__ui}}&lt;/span&gt;&lt;span class=\"strikeThroughGrey\"&gt;${{CurrentPrice__ui}}/{{BillingPeriod__ui}}&lt;/span&gt;{{/DiscountPrice__ui}}\n{{^DiscountPrice__ui}}{{#CurrentPrice__ui}}&lt;span style=\"padding-right: 10px\"&gt;${{CurrentPrice__ui}}/{{BillingPeriod__ui}}&lt;/span&gt;{{/CurrentPrice__ui}}{{/DiscountPrice__ui}}</template></field><field type=\"COMBO\" valuehalign=\"\" editmodebehavior=\"autopopup\" allowhtml=\"true\"><label>Discount:</label><template>&lt;span style=\"padding-right: 35px\"&gt;{{#Discount__ui}}{{Discount__ui}}{{/Discount__ui}} &lt;/span&gt;&lt;span style=\"font-weight: bold; padding-right: 15px\"&gt;ends:&lt;/span&gt;{{#Discount__ui}}{{EndDate__ui}}{{/Discount__ui}}</template><renderconditions logictype=\"and\" onhidedatabehavior=\"keep\"/><enableconditions logictype=\"and\"/></field></fields></section></sections></column></columns><renderconditions logictype=\"and\"/></basicfieldeditor><wrapper uniqueid=\"sk-2Ig8u8-324\"><components><template multiple=\"false\" uniqueid=\"sk-2Ify86-234\" allowhtml=\"true\" model=\"AssetModel\"><contents>&lt;div style=\"font-weight: bold; font-size: 14px\"&gt;Upgrade Options&lt;/div&gt;</contents></template><skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" pagesize=\"10\" createrecords=\"false\" model=\"UpgradeTable\" buttonposition=\"\" mode=\"readonly\" uniqueid=\"UpgradeTable\" emptysearchbehavior=\"query\"><fields><field id=\"Name__ui\" valuehalign=\"\" type=\"\"><label>PRODUCT</label></field><field type=\"COMBO\" valuehalign=\"right\" columnwidth=\"20%\"><label>LIST PRICE</label><template>${{OrigPrice__ui}} / {{BillingPeriod__ui}}</template></field><field type=\"COMBO\" valuehalign=\"right\" columnwidth=\"20%\"><label>DISCOUNTED PRICE </label><template>{{#DiscPrice__ui}}${{DiscPrice__ui}} / {{BillingPeriod__ui}}{{/DiscPrice__ui}}</template></field></fields><rowactions><action type=\"multi\" label=\"Select Offer\" icon=\"fa-circle-o\"/></rowactions><massactions usefirstitemasdefault=\"true\"/><views><view type=\"standard\"/></views><searchfields/></skootable><template multiple=\"false\" uniqueid=\"sk-2OxtKw-852\" model=\"SelectedRow\" allowhtml=\"true\"><contents>&lt;span style=\"color: red\"&gt;Please select an upgrade offer&lt;/span&gt;</contents><renderconditions logictype=\"and\"><rendercondition fieldmodel=\"SelectedRow\" sourcetype=\"modelproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"hasNoRows\"/></renderconditions></template></components><styles><styleitem type=\"background\"/><styleitem type=\"border\" padding=\"left,top,\" borders=\"none\"><styles><styleitem property=\"padding-left\" value=\"7px\"/><styleitem property=\"padding-top\" value=\"4px\"/><styleitem property=\"box-sizing\" value=\"border-box\"/></styles></styleitem><styleitem type=\"size\"/></styles></wrapper></components><actions><action uniqueid=\"sk-1qtYDd-84\" type=\"multi\" stepid=\"step2\" label=\"Next\" icon=\"\" window=\"self\"><actions><action type=\"custom\" snippet=\"OrderDetailSnippet\"/><action type=\"requeryModel\" model=\"PricebookEntryLookup\" behavior=\"standard\"/></actions></action></actions></step><step stepid=\"step2\" steplabel=\"\"><components><wrapper uniqueid=\"sk-2OcVRh-552\"><components><template multiple=\"false\" uniqueid=\"sk-2OcX1Q-559\" allowhtml=\"true\"><contents>&lt;span style=\"font-size: 30px\"&gt;Confirm QBO&lt;/span&gt;</contents></template></components><styles><styleitem type=\"background\"/><styleitem type=\"border\" borders=\"none\" padding=\"bottom,left,\"><styles><styleitem property=\"padding-left\" value=\"7px\"/><styleitem property=\"padding-bottom\" value=\"7px\"/><styleitem property=\"box-sizing\" value=\"border-box\"/></styles></styleitem><styleitem type=\"size\"/></styles></wrapper><basicfieldeditor showheader=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" model=\"AssetModel\" buttonposition=\"\" uniqueid=\"sk-1w6CBo-142\" mode=\"readonly\"><columns><column width=\"100%\"><sections><section title=\"Section A\" collapsible=\"no\" showheader=\"false\"><fields><field type=\"COMBO\" valuehalign=\"\" editmodebehavior=\"autopopup\"><label>Current Product:</label><template>{{Product2.Name}}</template></field><field type=\"COMBO\" valuehalign=\"\" editmodebehavior=\"autopopup\" allowhtml=\"true\"><label>Price:</label><template>{{#DiscountPrice__ui}}&lt;span style=\"padding-right: 10px\"&gt;${{DiscountPrice__ui}}/{{BillingPeriod__ui}}&lt;/span&gt;&lt;span class=\"strikeThroughGrey\"&gt;${{CurrentPrice__ui}}/{{BillingPeriod__ui}}&lt;/span&gt;{{/DiscountPrice__ui}}\n{{^DiscountPrice__ui}}{{#CurrentPrice__ui}}&lt;span style=\"padding-right: 10px\"&gt;${{CurrentPrice__ui}}/{{BillingPeriod__ui}}&lt;/span&gt;{{/CurrentPrice__ui}}{{/DiscountPrice__ui}}\n</template></field><field type=\"COMBO\" valuehalign=\"\" editmodebehavior=\"autopopup\" allowhtml=\"true\"><label>Discount:</label><template>&lt;span style=\"padding-right: 35px\"&gt;{{#Discount__ui}}{{Discount__ui}}{{/Discount__ui}} &lt;/span&gt;&lt;span style=\"font-weight: bold; padding-right: 15px\"&gt;ends:&lt;/span&gt;{{#Discount__ui}}{{EndDate__ui}}{{/Discount__ui}}</template></field></fields></section></sections></column></columns></basicfieldeditor><wrapper uniqueid=\"sk-2OdLik-209\"><components><skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" pagesize=\"10\" createrecords=\"false\" model=\"SelectedRow\" buttonposition=\"\" mode=\"readonly\" uniqueid=\"sk-2OdPTV-230\" emptysearchbehavior=\"query\" cssclass=\"readonlyTable\"><fields><field id=\"Name__ui\" valuehalign=\"\" type=\"\"><label>UPGRADING TO</label></field><field type=\"COMBO\" valuehalign=\"right\" columnwidth=\"20%\"><label>LIST PRICE</label><template>${{OrigPrice__ui}} / {{BillingPeriod__ui}}</template></field><field type=\"COMBO\" valuehalign=\"right\" columnwidth=\"20%\"><label>DISCOUNTED PRICE</label><template>{{#DiscPrice__ui}}${{DiscPrice__ui}} / {{BillingPeriod__ui}}{{/DiscPrice__ui}}</template></field></fields><rowactions/><massactions usefirstitemasdefault=\"true\"/><views><view type=\"standard\"/></views><searchfields/><renderconditions logictype=\"and\"/></skootable><wrapper uniqueid=\"sk-2OxcTn-819\"><components><template multiple=\"false\" uniqueid=\"sk-2Od768-173\" allowhtml=\"true\" model=\"SelectedRow\"><contents>&lt;span style=\"font-weight: bold\"&gt;Proration Amount:  &lt;/span&gt;{{ProrateAmt__ui}} (Credit card on file will be charged.)</contents></template></components><styles><styleitem type=\"background\"/><styleitem type=\"border\" borders=\"none\" padding=\"bottom,top,\"><styles><styleitem property=\"padding-top\" value=\"7px\"/><styleitem property=\"padding-bottom\" value=\"13px\"/><styleitem property=\"box-sizing\" value=\"border-box\"/></styles></styleitem><styleitem type=\"size\"/></styles></wrapper><wrapper uniqueid=\"sk-2OxdNN-829\"><components><template multiple=\"false\" uniqueid=\"sk-2IwW2n-1429\" model=\"AssetModel\" allowhtml=\"true\"><contents>&lt;span style=\"font-weight: bold\"&gt;Master Admin:  &lt;/span&gt;{{MasterAdmin__ui}}</contents></template></components><styles><styleitem type=\"background\"/><styleitem type=\"border\"/><styleitem type=\"size\"/></styles></wrapper></components><styles><styleitem type=\"background\"/><styleitem type=\"border\" padding=\"left,\"><styles><styleitem property=\"padding-left\" value=\"7px\"/><styleitem property=\"box-sizing\" value=\"border-box\"/></styles></styleitem><styleitem type=\"size\"/></styles></wrapper></components><actions><action uniqueid=\"sk-1qtYDe-85\" type=\"navigate\" stepid=\"step1\" label=\"Back\" icon=\"\" window=\"self\" cssclass=\"whiteButton\"><renderconditions logictype=\"and\"/><enableconditions/></action><action uniqueid=\"sk-1qtYDe-86\" type=\"multi\" label=\"Submit\" icon=\"\" window=\"self\"><actions><action type=\"blockUI\" message=\"Submitting Order...\"/><action type=\"createRow\" model=\"NewOpportunity\" appendorprepend=\"prepend\" defaultmodefornewitems=\"edit\" affectedrows=\"context\"><defaults><default type=\"fieldvalue\" field=\"AccountId\" enclosevalueinquotes=\"true\" value=\"{{$Model.AssetModel.data.0.AccountId}}\"/><default type=\"fieldvalue\" field=\"Name\" enclosevalueinquotes=\"true\" value=\"{{$Model.AssetModel.data.0.Account.Name}}\"/><default type=\"fieldvalue\" field=\"StageName\" enclosevalueinquotes=\"true\" value=\"Validate\"/><default type=\"fieldvalue\" field=\"CloseDate\" enclosevalueinquotes=\"false\" value=\"TODAY\"/><default type=\"fieldvalue\" field=\"LeadSource\" enclosevalueinquotes=\"true\" value=\"Phone\"/><default type=\"fieldvalue\" field=\"Product_Family_of_Interest__c\" enclosevalueinquotes=\"true\" value=\"QuickBooks Online (QBO)\"/><default type=\"fieldvalue\" field=\"Pricebook2Id\" enclosevalueinquotes=\"true\" value=\"{{$Model.PricebookEntryLookup.data.0.Pricebook2Id}}\"/><default type=\"fieldvalue\" field=\"Type\" enclosevalueinquotes=\"true\" value=\"Upgrade\"/><default type=\"fieldvalue\" field=\"Asset__c\" enclosevalueinquotes=\"true\" value=\"{{$Model.AssetModel.data.0.Id}}\"/><default type=\"fieldvalue\" field=\"Siebel_Order_id__c\" enclosevalueinquotes=\"true\" value=\"{{$Model.AssetModel.data.0.Id}}\"/><default type=\"fieldvalue\" field=\"CurrencyIsoCode\" enclosevalueinquotes=\"true\" value=\"{{$Model.PricebookEntryLookup.data.0.Account.CurrencyIsoCode}}\"/></defaults></action><action type=\"save\"><models><model>NewOpportunity</model></models><onerroractions><action type=\"blockUI\" message=\"Error saving new Opportunity\" timeout=\"2000\"/></onerroractions></action><action type=\"createRow\" model=\"NewOpportunityProduct\" appendorprepend=\"prepend\" defaultmodefornewitems=\"edit\"><defaults><default type=\"fieldvalue\" field=\"OpportunityId\" enclosevalueinquotes=\"true\" value=\"{{$Model.NewOpportunity.data.0.Id}}\"/><default type=\"fieldvalue\" field=\"Product2Id\" enclosevalueinquotes=\"true\" value=\"{{$Model.PricebookEntryLookup.data.0.Product2Id}}\"/><default type=\"fieldvalue\" field=\"PricebookEntryId\" enclosevalueinquotes=\"true\" value=\"{{$Model.PricebookEntryLookup.data.0.Id}}\"/></defaults></action><action type=\"save\"><models><model>NewOpportunityProduct</model></models><onerroractions><action type=\"blockUI\" message=\"Error saving new Opportunity Product\" timeout=\"2000\"/></onerroractions></action><action type=\"custom\" snippet=\"UpgradeCompanySnippet\"><onerroractions><action type=\"blockUI\" message=\"Error Upgrading Company\" timeout=\"2000\"/></onerroractions></action></actions></action></actions></step><step stepid=\"step3\" steplabel=\"\"><components><grid uniqueid=\"sk-3BQst7-304\"><divisions><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division><division behavior=\"fit\" verticalalign=\"center\"><components><image source=\"staticresource\" uniqueid=\"sk-3BP9w_-243\" resource=\"customIcons\" path=\"customIcons/EndOfFlowIcons/checkmark_icon_132px.png\" datasource=\"salesforce\" behavior=\"none\"><styles><styleitem type=\"itemsize\" width=\"custom\"><styles><styleitem property=\"width\" value=\"132px\"/></styles></styleitem><styleitem type=\"border\"/><styleitem property=\"text-align\" value=\"center\"/></styles><renderconditions logictype=\"and\"/></image></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/><styleitem property=\"padding\" value=\"20px\"/></styles></grid><grid uniqueid=\"sk-3Beg-f-461\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\"><components/></division><division behavior=\"fit\" verticalalign=\"top\"><components><template multiple=\"false\" uniqueid=\"sk-3BSJ2d-374\" allowhtml=\"true\"><contents>&lt;span style=\"font-size: 1.5em; font-weight: bold\"&gt;Upgrade Request Complete&lt;/span&gt;</contents></template></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles></grid><grid uniqueid=\"sk-3Bex8W-475\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\"><components/></division><division behavior=\"fit\" verticalalign=\"top\"><components><template multiple=\"false\" uniqueid=\"sk-3Bez49-484\"><contents>Processing the upgrade could take up to 1-2 minutes.\nYou may need to refresh the table to see the changes.</contents></template></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/><styleitem property=\"padding-top\" value=\"20px\"/></styles></grid><wrapper uniqueid=\"sk-3BftjU-538\"><components><pagetitle uniqueid=\"sk-3BfQoY-514\" model=\"AssetModel\" cssclass=\"wideButton\"><actions><action type=\"custom\" label=\"Close\" window=\"parent\" cssclass=\"\" url=\"/{{AccountId}}\" snippet=\"redirectToAccountDetail\"><hotkeys/><renderconditions logictype=\"and\"/><enableconditions/></action></actions><renderconditions logictype=\"and\"/></pagetitle></components><styles><styleitem type=\"background\"/><styleitem type=\"border\" padding=\"top,\"><styles><styleitem property=\"padding-top\" value=\"30px\"/><styleitem property=\"box-sizing\" value=\"border-box\"/></styles></styleitem><styleitem type=\"size\"/></styles></wrapper></components><actions/></step><step stepid=\"step4\" steplabel=\"\"><components><grid uniqueid=\"sk-3BQst7-305\"><divisions><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division><division behavior=\"fit\" verticalalign=\"center\"><components><image source=\"staticresource\" uniqueid=\"sk-3BP9w_-244\" resource=\"customIcons\" path=\"customIcons/EndOfFlowIcons/Warning_132.png\" datasource=\"salesforce\" behavior=\"none\"><styles><styleitem type=\"itemsize\" width=\"custom\"><styles><styleitem property=\"width\" value=\"132px\"/></styles></styleitem><styleitem type=\"border\"/><styleitem property=\"text-align\" value=\"center\"/></styles><renderconditions logictype=\"and\"/></image></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/><styleitem property=\"padding\" value=\"20px\"/></styles></grid><grid uniqueid=\"sk-3Beg-f-462\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\"><components/></division><division behavior=\"fit\" verticalalign=\"top\"><components><template multiple=\"false\" uniqueid=\"sk-3BSJ2d-375\" allowhtml=\"true\"><contents>&lt;span style=\"font-size: 1.5em; font-weight: bold\"&gt;Upgrade Request Unsuccessful&lt;/span&gt;</contents><renderconditions logictype=\"and\"/></template></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles></grid><grid uniqueid=\"sk-3Bex8W-476\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\"><components/></division><division behavior=\"fit\" verticalalign=\"top\"><components><template multiple=\"false\" uniqueid=\"sk-3Bez49-485\" model=\"SelectedRow\"><contents>{{ErrorMessage__ui}}\n</contents></template></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/><styleitem property=\"padding-top\" value=\"20px\"/><styleitem property=\"padding-bottom\" value=\"10px\"/></styles></grid><wrapper uniqueid=\"sk-3BftjU-539\"><components><pagetitle uniqueid=\"sk-3BfQoY-515\" model=\"AssetModel\" cssclass=\"wideButton\"><actions><action type=\"custom\" label=\"Close\" window=\"parent\" cssclass=\"\" url=\"/{{AccountId}}\" snippet=\"redirectToAccountDetail\"><hotkeys/><renderconditions logictype=\"and\"/><enableconditions/></action></actions><renderconditions logictype=\"and\"/></pagetitle></components><styles><styleitem type=\"background\"/><styleitem type=\"border\" padding=\"top,\"><styles><styleitem property=\"padding-top\" value=\"40px\"/><styleitem property=\"box-sizing\" value=\"border-box\"/></styles></styleitem><styleitem type=\"size\"/></styles></wrapper></components><actions/></step></steps></wizard></components><styles><styleitem type=\"background\" bgtype=\"none\"/><styleitem type=\"border\" padding=\"left,\" margin=\"top,\"><styles><styleitem property=\"padding-left\" value=\"13px\"/><styleitem property=\"margin-top\" value=\"-20px\"/><styleitem property=\"box-sizing\" value=\"border-box\"/></styles></styleitem><styleitem type=\"size\" width=\"custom\" height=\"custom\"><styles><styleitem property=\"min-width\" value=\"590px\"/><styleitem property=\"max-width\" value=\"590px\"/><styleitem property=\"min-height\" value=\"370px\"/><styleitem property=\"max-height\" value=\"370px\"/><styleitem property=\"overflow-y\" value=\"auto\"/></styles></styleitem></styles><renderconditions logictype=\"and\"/></wrapper></components><resources><labels/><javascript><jsitem location=\"inline\" name=\"PageInit\" cachelocation=\"false\" url=\"\">(function(skuid){\n\tvar $ = skuid.$;\n\t\n\t$(document.body).one('pageload',function(){\n\t    $.blockUI({message: 'Getting Upgrade Info'});\n\t\t$.when(getProductInfo()).done(function(){\n\t\t    highlightRow();\n\t\t    $.unblockUI();\n\t\t});\n\t});\n\t\n\tfunction getProductInfo(){\n\t    var dfd = $.Deferred();\n\t    var assetModel = skuid.model.getModel('AssetModel'),\n\t        assetRow = assetModel.getFirstRow();\n\t    var coId = assetModel.getFieldValue(assetRow, 'Company_Id__c');\n\t    var accountId = assetModel.getFieldValue(assetRow, 'AccountId');\n\t    var errormsg = '';\n        \n        console.log('Company Id:  ' + coId);\n        console.log('Calling APEX Service: getUpgradeInfo...');\n\t    UpgradeQBOCompanyServicesHelper.getUpgradeInfo(coId, accountId, function(result, event){\n\t        \n\t        console.log('event = ',event);\n\t        console.log('event result = ',event.result);\n\t        \n\t        console.log('result.upgradeErrorList ##### ',result.upgradeErrorList,+' result.upgradeErrorList is-Empty() ==== ',\n\t        $.isEmptyObject(result.upgradeErrorList)+' result.upgradeErrorList LENGTH ====',result.upgradeErrorList.length);\n\t        \n\t        //CALL Success Checking\n\t        if (event.status === true &amp;&amp; result.errorType === '' &amp;&amp; result.errorCode ==='' &amp;&amp; result.message ==='' &amp;&amp; result.upgradeErrorList.length === 0) {\n\t            console.log('Call Complete = result:');\n\t            console.log(result);\n\t            \n\t            // ========================================\n\t            // If CoId is valid - grab all related info\n\t            // ========================================\n\t            console.log('Updating product details...');\n\t            \n\t            // Get billing period info (monthly vs annual)\n\t            var billingPeriod = result.upgradeCompanyInfo.subscriptionInfo.billingPeriod;\n\t            var billingPeriodShort = '';\n\t            var billingPeriodLong = '';\n\t            if (billingPeriod == 'MONTHLY') {\n\t                billingPeriodShort = 'mo';\n\t                billingPeriodLong = 'month';\n\t            }\n\t            else {\n\t                billingPeriodShort = 'yr';\n\t                billingPeriodLong = 'year';\n\t            }\n\t            \n\t            // Calculate 'end' date:\n\t            var status = assetModel.getFieldValue(assetRow, 'StatusGlobal__c');\n\t            if (status == 'In Trial') {\n\t                var endDate = skuid.time.parseSFDate(assetModel.getFieldValue(assetRow, 'Trial_End_Date__c'));\n\t                endDate = skuid.time.formatDate('MM d, yy', endDate);\n\t            }\n\t            else if (status == 'Active/Subscribed') {\n\t                var endDate = skuid.time.parseSFDate(assetModel.getFieldValue(assetRow, 'Signup_Date__c'));\n\t                var duration = parseInt(result.upgradeCompanyInfo.subscriptionInfo.duration, 10);\n\t                endDate.setDate(endDate.getDate() + duration);\n\t                endDate = skuid.time.formatDate('MM d, yy', endDate);\n\t            }\n\t            \n\t            // Update current asset details\n\t            assetModel.updateRow(assetRow, {MasterAdmin__ui : result.upgradeCompanyInfo.userInfo[0].email,\n\t                                            CurrentPrice__ui : result.upgradeCompanyInfo.subscriptionInfo.currentBasePrice,\n\t                                            DiscountPrice__ui : result.upgradeCompanyInfo.subscriptionInfo.discountedPrice,\n\t                                            BillingPeriod__ui : billingPeriodLong,\n\t                                            UserId__ui : result.upgradeCompanyInfo.userInfo[0].userId,\n\t                                            EndDate__ui : endDate});\n\t                                            \n\t            // Lookup OfferedProduct in SF first\n\t            var offeredProductModel = skuid.model.getModel('OfferedProduct'),\n\t                offeredProductCond = offeredProductModel.getConditionByName('OfferedProductFilter');\n\t            offeredProductModel.setCondition(offeredProductCond, result.upgradeCompanyInfo.subscriptionInfo.offerId);\n\t            offeredProductModel.activateCondition(offeredProductCond);\n\t            offeredProductModel.updateData(function(){\n\t                var offeredProductRow = offeredProductModel.getFirstRow();\n\t                var discountDesc = offeredProductModel.getFieldValue(offeredProductRow, 'DiscountDescription__c');\n\t                if (discountDesc !== null) {\n\t                    discountDesc = discountDesc.replace('discount', '');\n\t                }\n\t                assetModel.updateRow(assetRow, {Discount__ui : discountDesc});\n\t                console.log('Update Complete!');\n\t            });\n\t            \n\t            // Grab Upgrade info\n                var upgradeTableModel = skuid.model.getModel('UpgradeTable');\n\t            var upgradePrice = {};\n\t            if (result.upgradeCompanyInfo.upgradeOfferInfo.length &gt;= 1) {\n\t                // One upgrade option available\n\t                var newRow = upgradeTableModel.createRow();\n\t                upgradePrice[newRow.Id] = ({    Name__ui : result.upgradeCompanyInfo.upgradeOfferInfo[0].sku,\n\t                                                DiscPrice__ui : result.upgradeCompanyInfo.upgradeOfferInfo[0].discountedPrice,\n\t                                                OrigPrice__ui : result.upgradeCompanyInfo.upgradeOfferInfo[0].offerPrice,\n\t                                                OfferId__ui : result.upgradeCompanyInfo.upgradeOfferInfo[0].offerId,\n\t                                                PricebookEntry__ui : result.upgradeCompanyInfo.upgradeOfferInfo[0].priceBookEntryId,\n\t                                                BillingPeriod__ui : billingPeriodShort});\n\t            }\n\t            \n\t            if (result.upgradeCompanyInfo.upgradeOfferInfo.length &gt; 1) {\n\t                // Two upgrade options available\n\t                var newRow = upgradeTableModel.createRow({doAppend: true});\n\t                upgradePrice[newRow.Id] = ({    Name__ui : result.upgradeCompanyInfo.upgradeOfferInfo[1].sku,\n\t                                                DiscPrice__ui : result.upgradeCompanyInfo.upgradeOfferInfo[1].discountedPrice,\n\t                                                OrigPrice__ui : result.upgradeCompanyInfo.upgradeOfferInfo[1].offerPrice,\n\t                                                OfferId__ui : result.upgradeCompanyInfo.upgradeOfferInfo[1].offerId,\n\t                                                PricebookEntry__ui : result.upgradeCompanyInfo.upgradeOfferInfo[1].priceBookEntryId,\n\t                                                BillingPeriod__ui : billingPeriodShort});\n\t            }\n\t            \n                upgradeTableModel.updateRows(upgradePrice);\n                dfd.resolve();\n                \n\t            if (result.upgradeErrorList !== undefined) {\n\t                if (result.upgradeErrorList.length !== 0) {\n    \t                var errormsg = '';\n    \t                $.each(result.upgradeErrorList, function (i, val){\n    \t                   errormsg = errormsg + '\\n' + this.message;\n    \t                });\n    \t                alert('ERROR: ' + errormsg);\n    \t                $.unblockUI();\n    \t                dfd.reject();\n    \t                /*\n                        *Start BTBS-5474\n                        * by Harsh Rawat\n                        */\n    \t                parent.redirectToAccountDetail();\n    \t                /*\n                        *End BTBS-5474\n                        */\n    \t                //window.top.location.href = \"/\" + accountId; \n\t                }\n\t            }\n\t        }  \n\t        \n\t        else { //CALL Failed : Error Received\n\t            console.log('FROM ELSE result = ',result);\n\t            console.log('FROM ELSE event = ',event);\n\t            \n\t            if (!$.isEmptyObject(result)) {\n\t                var finalMsg = '';\n\t                    if(result.message === ''){\n\t                        \n\t                        if (result.upgradeErrorList !== undefined) {\n                                    if (result.upgradeErrorList.length !== 0) {\n                                        $.each(result.upgradeErrorList, function (i, val){\n                                               finalMsg = finalMsg + '\\n' + this.message;\n                                        });\n                                    }\n                            }\n\t                    }\n\t                    else{\n\t                        finalMsg = result.message;\n\t                    }\n    \t            \n    \t            alert('ERROR: ' + finalMsg);\n    \t            \n\t            }\n\t            else {\n\t                alert('ERROR: ' + event.message);\n\t            }\n\t            \n\t            $.unblockUI();\n\t            dfd.reject();\n\t            /*\n                *Start BTBS-5474\n                * by Harsh Rawat\n                */\n\t            parent.redirectToAccountDetail();\n\t            /*\n                *End BTBS-5474\n                */\n\t            //window.top.location.href = \"/\" + accountId; \n\t        }\n\t    });\n\t    \n        return dfd.promise();\n\t}\n\t\n\tfunction highlightRow() {\n\t    \n\t    // ======================================\n\t    // Set up models and table component\n\t    // ======================================\n\t    var tableName = ['#UpgradeTable'];\n\n        // ======================================\n\t    // Highlight the row based on user click\n\t    // ======================================\n\t    // For each table row, add CSS class 'highlighted-row' on click and fill in circle\n\t    // Ensure only one row is selected at all times.  Check all other rows and remove selected row classes as needed\n\t    var selectedRow = '';\n\t    for (i = 0; i&lt;tableName.length; i++) {\n    \t\t$(tableName[i] + ' table tbody tr').click(function(){\n    \t\t    selectedRow = this;\n    \t\t    $(selectedRow).addClass('highlighted-row');\n    \t\t    iconElement = $(selectedRow).find('.nx-skootable-buttonicon');\n    \t\t    $(iconElement).removeClass('fa-circle-o').addClass('fa-dot-circle-o');\n    \t\t    \n    \t\t    for (j = 0; j&lt;tableName.length; j++) {\n        \t\t    // Ensure only one row is selected\n        \t\t    $(tableName[j] + ' table tbody tr').each(function(){\n        \t\t        if ((this != selectedRow) &amp;&amp; ($(this).hasClass('highlighted-row'))) {\n        \t\t            $(this).removeClass('highlighted-row');\n        \t\t            iconElement = $(this).find('.nx-skootable-buttonicon');\n        \t\t            $(iconElement).removeClass('fa-dot-circle-o').addClass('fa-circle-o');\n        \t\t        }\n        \t\t    });\n    \t\t    }\n    \t\t});\n\t    }\n\t}\n})(skuid);</jsitem><jsitem location=\"inlinesnippet\" name=\"OrderDetailSnippet\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\n// ==============================\n// Moved selected row into model\n// ==============================\nvar selectedRowModel = skuid.model.getModel('SelectedRow'),\n    flag = false;\n    selectedRow = {};\n    selectedRowModel.abandonAllRows();\n    \n// Find highlighted row for the selected offer\nvar tableName = ['#UpgradeTable'];\nfor (i = 0; i&lt;tableName.length; i++) {\n    $(tableName[i] + ' table tbody tr').each(function(){\n        if ($(this).hasClass('highlighted-row')) {\n            selectedRow = $(this).data('object');\n            selectedRowModel.adoptRow(selectedRow.row);\n            flag = true;\n            return false;\n        }\n    });\n}\n\n// If no row is selected, show error message and don't move to the next step\nif (flag === true) {\n    // Navigate to the next step\n    var wizard = skuid.component.getById('UpgradeWizard');\n    wizard.navigate('step2');\n    \n    // =====================================\n    // Call Apex Service to get charge info\n    // =====================================\n    var assetModel = skuid.model.getModel('AssetModel'),\n    \tassetRow = assetModel.getFirstRow();\n    var offProdModel = skuid.model.getModel('OfferedProduct'),\n        offProdRow = offProdModel.getFirstRow();\n        \n    var coId = assetModel.getFieldValue(assetRow, 'Company_Id__c');\n    var userId = assetModel.getFieldValue(assetRow, 'UserId__ui');\n    var offerId = selectedRowModel.getFieldValue(selectedRowModel.getFirstRow(), 'OfferId__ui');\n    var accId = assetModel.getFieldValue(assetRow, 'AccountId');\n    \n    $.blockUI({message: 'Getting Upgrade Info'});\n    console.log('Calling APEX Service: getUpgradeChargeInfo...');\n    UpgradeQBOCompanyServicesHelper.getUpgradeChargeInfo(userId, offerId, coId, accId, function(result, event){\n        $.unblockUI();\n        //if (event.status === true &amp;&amp; result.errorType === '') {\n            //CALL Success Checking\n\t        if (event.status === true &amp;&amp; result.errorType === '' &amp;&amp; result.errorCode ==='' &amp;&amp; result.message ==='' &amp;&amp; result.upgradeErrorList.length === 0) {\n            var selectedModel = skuid.model.getModel('SelectedRow'),\n                selectedRow = selectedModel.getFirstRow();\n            selectedModel.updateRow(selectedRow, {ProrateAmt__ui : '$' + result.upgradeChargeInfo.oneTimeCharge});\n            console.log(result);\n        }\n        else {//CALL Failed : Error Received\n        \n            console.log(event);\n            //alert('ERROR: ' + result.message); This Was OLD AS-IS\n        \n            if (!$.isEmptyObject(result)) {\n\t                var finalMsg = '';\n\t                    if(result.message === ''){\n\t                        \n\t                        if (result.upgradeErrorList !== undefined) {\n                                    if (result.upgradeErrorList.length !== 0) {\n                                            $.each(result.upgradeErrorList, function (i, val){\n                                                finalMsg = finalMsg + '\\n' + this.message;\n                                            });\n                                    }\n                            }\n\t                    }\n\t                    else{\n\t                        finalMsg = result.message;\n\t                    }\n    \t            \n    \t            alert('ERROR: ' + finalMsg);\n    \t            \n\t            }\n           /*\n            *Start BTBS-5474\n            * by Harsh Rawat\n            */\n\t        parent.redirectToAccountDetail();\n\t        /*\n            *End BTBS-5474\n            */\n            //window.top.location.href = \"/\" + accId; \n        }\n    });\n}</jsitem><jsitem location=\"inlinesnippet\" name=\"UpgradeCompanySnippet\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n\n// ==============================\n// Get parameters for apex call\n// ==============================\nvar selectedModel = skuid.model.getModel('SelectedRow'),\n    selectedRow = selectedModel.getFirstRow();\nvar assetModel = skuid.model.getModel('AssetModel'),\n\tassetRow = assetModel.getFirstRow();\nvar opptyModel = skuid.model.getModel('NewOpportunity'),\n    opptyRow = opptyModel.getFirstRow();\n    \nvar coId = assetModel.getFieldValue(assetRow, 'Company_Id__c');\nvar userId = assetModel.getFieldValue(assetRow, 'UserId__ui');\nvar offerId = selectedModel.getFieldValue(selectedRow, 'OfferId__ui');\nvar accId = assetModel.getFieldValue(assetRow, 'AccountId');\nvar opptyId = opptyModel.getFieldValue(opptyRow, 'Id');\n\nvar ofprodmodel = skuid.model.getModel('OfferedProduct');\nvar ofprodmodelrow = ofprodmodel.getFirstRow();\nvar actualofferid =  ofprodmodel.getFieldValue(ofprodmodelrow, 'Id');\nvar ProductOfferId_uif = ofprodmodel.getFieldValue(ofprodmodelrow, 'Offer__c');\n\nconsole.log('selectedModel::'+ selectedModel);\nconsole.log('CompanyId_Asset: ' + coId);\nconsole.log('userId_Asset: ' + userId);\nconsole.log('offerId_Asset: ' + offerId);\nconsole.log('opptyId_Asset: ' + opptyId);\n\nconsole.log('actualofferid ' + actualofferid);\nconsole.log('Offer__c: ' +ProductOfferId_uif);\n    \n// ==============================\n// Call apex service to upgrade\n// ==============================\nconsole.log('Calling APEX Service: upgradeCompany...');\n$.blockUI({message: 'Upgrading Company'});\nvar wizard = skuid.component.getById('UpgradeWizard');\n\n// For testing only\n// UpgradeQBOCompanyServicesHelper.upgradeCompany('1234', 'offerId', 'coId', '1234', 'accId', function(result, event){\n\nUpgradeQBOCompanyServicesHelper.upgradeCompany(userId, offerId, coId, opptyId, accId, function(result, event){\n    //if (event.status === true &amp;&amp; result.errorType === '') {\n        //CALL Success Checking\n\tif (event.status === true &amp;&amp; result.errorType === '' &amp;&amp; result.errorCode ==='' &amp;&amp; result.message ==='' &amp;&amp; result.upgradeErrorList.length === 0) {\n        \n        if(opptyId !== null &amp;&amp; opptyId !== undefined){\n                           console.log('opportunityId for flow = '+opptyId);\n                            \n                         $.blockUI({\n                           message: 'Creating Order . . . Please Wait!'})\n                            console.log('Status_____Activated');\n                           UpgradeQBOCompanyServicesHelper.executeOportunityFlow(opptyId,\n                                                                               '',//billingProfileId,\n                                                                               '',//compAddressID,\n                                                                               '',//billAddressID,\n                                                                               coId,\n                                                                              actualofferid,// OfferId,\n                                                                              '',// OfferType,\n                                                                              '',// userName,\n                                                                              '',// createCompanyType,\n                                                                              'Upgrade',\n                                                                               'Activated',\n                            function(result,e){\n                                \tif(e.status === true){\n                                    \t$.unblockUI();\n    \t\t\t\t\t               \n                                \t}\n                                \telse{\n                                \t      \n\t\t                                   $.unblockUI();\n                                \t}\n                           }); \n                        }\n        $.unblockUI();\n        wizard.navigate('step3');\n        console.log(result);\n        console.log('Upgrade Successful!');\n        \n        //Close Oppty\n        opptyModel.updateRow(opptyRow, {StageName : 'Closed Won' });\n        opptyModel.save();\n    }\n    else {\n        console.log(event);\n        /*** This Was OLD AS-IS\n         if (result !== null) {\n            selectedModel.updateRow(selectedRow, {ErrorMessage__ui : result.message});\n        }\n        *****/\n        if(opptyId !== null &amp;&amp; opptyId !== undefined){\n                           console.log('opportunityId for flow = '+opptyId);\n                            \n                         $.blockUI({\n                           message: 'Creating Order . . . Please Wait!'})\n                            console.log('Status_____Draft');\n                           UpgradeQBOCompanyServicesHelper.executeOportunityFlow(opptyId,\n                                                                               '',//billingProfileId,\n                                                                               '',//compAddressID,\n                                                                               '',//billAddressID,\n                                                                               coId,\n                                                                              ProductOfferId_uif,// OfferId,\n                                                                              '',// OfferType,\n                                                                              '',// userName,\n                                                                              '',// createCompanyType,\n                                                                              'Upgrade',\n                                                                               'Draft',\n                            function(result,e){\n                                \tif(e.status === true){\n                                    \t$.unblockUI();\n    \t\t\t\t\t               \n                                \t}\n                                \telse{\n                                \t      \n\t\t                                   $.unblockUI();\n                                \t}\n                           }); \n                        }\n                        \n        if (!$.isEmptyObject(result)) {\n\t                var finalMsg = '';\n\t                    if(result.message === ''){\n\t                        \n\t                        if (result.upgradeErrorList !== undefined) {\n                                    if (result.upgradeErrorList.length !== 0) {\n                                            $.each(result.upgradeErrorList, function (i, val){\n                                                finalMsg = finalMsg + '\\n' + this.message;\n                                            });\n                                    }\n                            }\n\t                    }\n\t                    else{\n\t                        finalMsg = result.message;\n\t                    }\n    \t            \n    \t            //alert('ERROR: ' + finalMsg);\n    \t            selectedModel.updateRow(selectedRow, {ErrorMessage__ui : finalMsg});\n    \t            \n\t   }\n        else {\n            selectedModel.updateRow(selectedRow, {ErrorMessage__ui : event.message});\n        }\n        \n        $.unblockUI();\n        wizard.navigate('step4');\n    }\n});</jsitem><jsitem location=\"inlinesnippet\" name=\"redirectToAccountDetail\" cachelocation=\"false\" url=\"\">/*\n*BTBS-5474\n* by Harsh Rawat\n*/\nparent.redirectToAccountDetail();</jsitem></javascript><css><cssitem location=\"inline\" name=\"pagecss\" cachelocation=\"false\">.nx-basicfieldeditor-item {\n    margin-top: -8px;\n}\n\n.nx-basicfieldeditor-columngroup {\n    padding-top: 0px !important;\n}\n\n.nx-modified .nx-fieldtext {\n    font-style: normal !important;\n}\n\n.strikeThroughGrey {\n    color: #BABEC5 !important;\n    text-decoration: line-through;\n}\n\n.strikeThroughGrey .nx-fieldtext {\n    color: #BABEC5 !important;\n    text-decoration: line-through;\n}\n.readonlyTable table.nx-skootable-data tbody tr:hover td {\n\tbackground-color: transparent !important;\n\tborder-bottom-width: 1px !important;\n\tpadding-bottom: 4px !important;\n}\n\n#UpgradeTable table td:nth-child(4) .nx-fieldtext{\n    font-weight: bold !important;\n}\n\n.readonlyTable table td:nth-child(3) .nx-fieldtext{\n    font-weight: bold !important;\n}\n\n.nx-basicfieldeditor-item-label {\n    width: 25%;\n}\n\n.wideButton .nx-header-right {\n    text-align: center;\n    float: none;\n}\n\n.wideButton .ui-button-text {\n    width: 100px;\n}</cssitem></css></resources><styles><styleitem type=\"background\" bgtype=\"none\"/></styles></skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null}]