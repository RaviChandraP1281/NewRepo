[{"attributes":{"type":"skuid__Page__c","url":"/services/data/v36.0/sobjects/skuid__Page__c/a3Kf00000001E3uEAE"},"Id":"a3Kf00000001E3uEAE","Name":"ConfirmationandRemailderEmails","skuid__Type__c":"Desktop","skuid__UniqueId__c":"_ConfirmationandRemailderEmails","skuid__Module__c":null,"skuid__Composer_Settings__c":null,"skuid__MasterPage__c":null,"skuid__MasterPage__r":null,"skuid__IsMaster__c":false,"skuid__Layout__c":"<skuidpage unsavedchangeswarning=\"yes\" personalizationmode=\"server\" showsidebar=\"true\" showheader=\"true\" theme=\"Intuit studio\"><models><model id=\"studypartDummy\" limit=\"100\" query=\"true\" createrowifnonefound=\"false\" type=\"\" sobject=\"Study_Participant__c\" datasource=\"salesforce\" doclone=\"\" orderby=\"Participant__r.Name\"><fields><field id=\"Participant__c\"/><field id=\"Participant__r.Name\"/><field id=\"Participant__r.Email__c\"/><field id=\"Participant__r.Phone__c\"/><field id=\"Participant__r.Last_Name__c\"/><field id=\"Id\"/></fields><conditions><condition type=\"param\" value=\"study\" field=\"Study__c\" operator=\"=\" enclosevalueinquotes=\"true\" novaluebehavior=\"\" state=\"\" inactive=\"false\"/><condition type=\"fieldvalue\" value=\"true\" enclosevalueinquotes=\"false\" field=\"IsInvited__c\" operator=\"=\"/></conditions><actions/></model><model id=\"studypart\" limit=\"\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"Study_Participant__c\" datasource=\"salesforce\"><fields><field id=\"Participant__c\"/><field id=\"Participant__r.Name\"/><field id=\"Participant__r.Email__c\"/><field id=\"Participant__r.Phone__c\"/><field id=\"Participant__r.Last_Name__c\"/><field id=\"Confirmation_of_participant__c\"/><field id=\"Participant__r.NDA_Signed_Date__c\"/><field id=\"Participant__r.NDA_Signed__c\"/><field id=\"confirmationsent_UI\" uionly=\"true\" displaytype=\"TEXT\"/><field id=\"Study__c\"/><field id=\"Study__r.Name\"/></fields><conditions><condition type=\"fieldvalue\" value=\"\" enclosevalueinquotes=\"true\" field=\"Id\" operator=\"=\" state=\"filterableoff\" inactive=\"true\" name=\"id\"/></conditions><actions><action><actions><action type=\"requeryModel\" model=\"calendar\" behavior=\"standard\"/></actions><events><event>models.loaded</event></events></action></actions></model><model id=\"calendar\" limit=\"20\" query=\"false\" createrowifnonefound=\"false\" type=\"\" sobject=\"Studio_Calender__c\" datasource=\"salesforce\"><fields><field id=\"Id\"/><field id=\"End_Time__c\"/><field id=\"CreatedDate\"/></fields><conditions><condition type=\"modelmerge\" value=\"\" field=\"Study_Participant__c\" operator=\"=\" model=\"studypart\" enclosevalueinquotes=\"true\" mergefield=\"Id\" novaluebehavior=\"deactivate\"/></conditions><actions/></model></models><components><wrapper uniqueid=\"sk-2Q3g_q-86\"><components><grid uniqueid=\"sk-2V2QSM-382\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\"><components><pagetitle model=\"studypartDummy\" uniqueid=\"sk-2QTils-490\"><actions/><maintitle>1) Select A Participant</maintitle></pagetitle><grid uniqueid=\"sk-2Q3iOi-93\"><divisions><division behavior=\"flex\" verticalalign=\"top\" ratio=\"1\" minwidth=\"100px\"><components><skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" pagesize=\"25\" createrecords=\"false\" model=\"studypart\" buttonposition=\"\" mode=\"readonly\" uniqueid=\"sk-2QIlLL-125\" emptysearchbehavior=\"query\" allowscrollbars=\"false\" tablescrollheight=\"200px\"><fields/><rowactions/><massactions usefirstitemasdefault=\"true\"/><views/><filters><filter type=\"select\" filteroffoptionlabel=\"Study Participant\" createfilteroffoption=\"true\" affectcookies=\"false\" autocompthreshold=\"102\" conditionsource=\"manual\" labelmode=\"no\" condition=\"id\" label=\"participants\"><sources><source type=\"model\" effectsbehavior=\"justdefault\" model=\"studypartDummy\"><labeltemplate>{{Participant__r.Name}} {{Participant__r.Last_Name__c}}</labeltemplate><valuetemplate>{{Id}}</valuetemplate></source></sources></filter></filters><searchfields/><renderconditions logictype=\"and\"/></skootable></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"25\"><components/></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles></grid></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles><renderconditions logictype=\"and\"/></grid><grid uniqueid=\"sk-2VDOIV-555\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\"><components><wrapper uniqueid=\"sk-2VDUGj-561\"><components/><styles><styleitem type=\"background\"/><styleitem type=\"border\"/><styleitem type=\"size\" height=\"custom\"><styles><styleitem property=\"min-height\" value=\"50px\"/><styleitem property=\"max-height\" value=\"50px\"/><styleitem property=\"overflow-y\" value=\"auto\"/></styles></styleitem></styles></wrapper></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles></grid><grid uniqueid=\"sk-2QJTrx-245\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\" verticalalign=\"top\"><components><pagetitle model=\"studypartDummy\" uniqueid=\"sk-2QTs8O-501\"><actions/><maintitle>2) Verify Recipient and send Email</maintitle><renderconditions logictype=\"and\"/></pagetitle><skootable showconditions=\"true\" showsavecancel=\"false\" showerrorsinline=\"true\" searchmethod=\"server\" searchbox=\"false\" showexportbuttons=\"false\" pagesize=\"10\" createrecords=\"false\" model=\"studypart\" buttonposition=\"\" mode=\"readonly\" uniqueid=\"sk-2QJW3i-250\" emptysearchbehavior=\"query\"><fields><field id=\"Participant__r.Name\" valuehalign=\"\" type=\"\"/><field id=\"Participant__r.Last_Name__c\" valuehalign=\"\" type=\"\"/><field id=\"Participant__r.Phone__c\"/><field id=\"Participant__r.Email__c\"/><field id=\"Confirmation_of_participant__c\"/><field id=\"Participant__r.NDA_Signed__c\"/><field id=\"Participant__r.NDA_Signed_Date__c\"/></fields><rowactions/><massactions usefirstitemasdefault=\"true\"/><views/><searchfields/><renderconditions logictype=\"and\"/></skootable><wrapper uniqueid=\"sk-2VLKhI-596\"><components/><styles><styleitem type=\"background\"/><styleitem type=\"border\"/><styleitem type=\"size\" height=\"custom\"><styles><styleitem property=\"min-height\" value=\"20px\"/><styleitem property=\"max-height\" value=\"20px\"/><styleitem property=\"overflow-y\" value=\"auto\"/></styles></styleitem></styles></wrapper><grid uniqueid=\"sk-2RGwCm-347\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\"><components/></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components><pagetitle model=\"studypart\" uniqueid=\"sk-2QcH1w-653\"><actions><action type=\"multi\" label=\"Send Confirmation Email\" snippet=\"ConfirmationEmail\" icon=\"sk-icon-send-email\"><renderconditions logictype=\"and\"/><enableconditions/><actions><action type=\"custom\" snippet=\"ConfirmationEmail\"/><action type=\"updateRow\" fieldmodel=\"studypart\" field=\"confirmationsent_UI\" enclosevalueinquotes=\"true\" value=\"Confirmation\" affectedrows=\"context\"/></actions></action></actions><renderconditions logictype=\"and\"/></pagetitle></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components><pagetitle uniqueid=\"sk-2UqZmd-152\" model=\"studypart\"><actions><action type=\"multi\" label=\"Send Reminder Email\" icon=\"sk-icon-send-email\"><actions><action type=\"custom\" snippet=\"RemainderEmail\"/><action type=\"updateRow\" fieldmodel=\"studypart\" field=\"confirmationsent_UI\" enclosevalueinquotes=\"true\" value=\"Reminder\"/></actions></action></actions></pagetitle></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components/></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles><renderconditions logictype=\"and\"/></grid></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles><renderconditions logictype=\"and\"><rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"true\" fieldmodel=\"studypart\" sourcetype=\"modelproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"hasRows\"/></renderconditions></grid><grid uniqueid=\"sk-2VDM-7-550\"><divisions><division behavior=\"flex\" minwidth=\"100px\" ratio=\"1\" verticalalign=\"top\"><components><wrapper uniqueid=\"sk-2VDZVb-573\"><components/><styles><styleitem type=\"background\"/><styleitem type=\"border\"/><styleitem type=\"size\" height=\"custom\"><styles><styleitem property=\"min-height\" value=\"50px\"/><styleitem property=\"max-height\" value=\"50px\"/><styleitem property=\"overflow-y\" value=\"auto\"/></styles></styleitem></styles></wrapper></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles></grid><grid uniqueid=\"sk-2Uu6WB-174\"><divisions><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"4.5\"><components><pagetitle uniqueid=\"sk-2UuImQ-188\" model=\"studypartDummy\"><actions/><maintitle>3) Email Status</maintitle></pagetitle><richtext multiple=\"false\" uniqueid=\"sk-2UuUEp-194\"><contents>&lt;p&gt;&amp;nbsp;Confirmation sent&lt;/p&gt;\n</contents></richtext></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"4.5\"><components/></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components><pagetitle uniqueid=\"sk-2VACMG-483\" model=\"studypartDummy\"><actions><action type=\"multi\" label=\"To Study\" icon=\"sk-icon-return\" window=\"self\" url=\"/{{$Param.study}}\"><actions><action type=\"save\"><models><model>studypartDummy</model><model>studypart</model><model>calendar</model></models></action><action type=\"redirect\" window=\"self\" url=\"/{{$Param.study}}\"/></actions></action></actions></pagetitle></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles><renderconditions logictype=\"custom\" logic=\"1 AND 2\"><rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"true\" fieldmodel=\"studypart\" sourcetype=\"modelproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"hasRows\"/><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" fieldmodel=\"studypart\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"confirmationsent_UI\" value=\"Confirmation\"/></renderconditions></grid><grid uniqueid=\"sk-2UuuvO-234\"><divisions><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"4.5\"><components><pagetitle uniqueid=\"sk-2UwK2J-247\" model=\"studypartDummy\"><actions/><maintitle>3) Email Status</maintitle></pagetitle><richtext multiple=\"false\" uniqueid=\"sk-2UwTJy-251\"><contents>&lt;p&gt;Reminder sent&lt;/p&gt;\n</contents></richtext></components></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"4.5\"><components/></division><division behavior=\"flex\" verticalalign=\"top\" minwidth=\"100px\" ratio=\"1\"><components><pagetitle uniqueid=\"sk-2VACyk-487\" model=\"studypartDummy\"><actions><action type=\"multi\" label=\"To Study\" icon=\"sk-icon-return\" window=\"self\" url=\"/{{$Param.study}}\"><actions><action type=\"save\"><models><model>studypartDummy</model><model>studypart</model><model>calendar</model></models></action><action type=\"redirect\" url=\"/{{$Param.study}}\" window=\"self\"/></actions></action></actions></pagetitle></components></division></divisions><styles><styleitem type=\"background\" bgtype=\"none\"/></styles><renderconditions logictype=\"and\" logic=\"(2)\"><rendercondition type=\"fieldvalue\" enclosevalueinquotes=\"true\" fieldmodel=\"studypart\" sourcetype=\"modelproperty\" nosourcerowbehavior=\"deactivate\" sourceproperty=\"hasRows\"/><rendercondition type=\"fieldvalue\" operator=\"=\" enclosevalueinquotes=\"true\" fieldmodel=\"studypart\" sourcetype=\"fieldvalue\" nosourcerowbehavior=\"deactivate\" field=\"confirmationsent_UI\" value=\"Reminder\"/></renderconditions></grid></components><styles><styleitem type=\"background\"/><styleitem type=\"border\"/><styleitem type=\"size\"/></styles></wrapper></components><resources><labels/><javascript><jsitem location=\"inlinesnippet\" name=\"ConfirmationEmail\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n var calendarModel = skuid.model.getModel('calendar');\n var calendarrec = calendarModel.data[0];\n try{\n     if(typeof calendarrec !== 'undefined'){\n      var response = sforce.apex.execute(\n          'SendConfirmationandRemainderEmails', 'sendConfirmationEmail' , {calendarId: calendarrec.Id});\n     }else{\n         alert('No event found. Please book an event for sending confirmation.');\n     }\n     \n } catch(e){\n        alert('Unable to Send Confirmation email to Participant. Please try agin later...'+e);\n }</jsitem><jsitem location=\"external\" name=\"AJAXKit\" cachelocation=\"false\" url=\"/soap/ajax/36.0/apex.js\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem><jsitem location=\"inlinesnippet\" name=\"RemainderEmail\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n var calendarModel = skuid.model.getModel('calendar');\n var calendarrec = calendarModel.data[0];\n\n try{\n      if(typeof calendarrec !== 'undefined'){\n        var response = sforce.apex.execute('SendConfirmationandRemainderEmails', 'sendRemainderEmail' , {calendarId: calendarrec.Id});\n      }else{\n         alert('No event found. Please book an event for sending confirmation.');\n     }\n } catch(e){\n     alert('Unable to Send Reminder email to Participant. Please try agin later...'+e);\n }</jsitem><jsitem location=\"inlinesnippet\" name=\"redirect\" cachelocation=\"false\">var params = arguments[0],\n\t$ = skuid.$;\n var stdparModel = skuid.model.getModel('studypart');\n var rec = stdparModel.data[0].Study__c;\n \n try{\n     var reloc = \"https://intuitb2b--dev--skuid.cs24.visual.force.com/\" + rec;\n     window.Location= reloc;\n     \n } catch(e){\n     \n }</jsitem></javascript><css><cssitem location=\"inline\" name=\"newcss\" cachelocation=\"false\">#sk-2QIlLL-125\n.nx-list-footer{\n    display: none;\n}\n\n#sk-2QJW3i-250\n.nx-list-footer{\n    display: none;\n}\n\n.nx-actionselect-dropdown{\n    height: 200px;\n    overflow-y: auto;\n}\n</cssitem></css></resources><styles><styleitem type=\"background\" bgtype=\"none\"/></styles></skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null}]